import{s as X,f as k,g,h as $,d as m,i as b,K as ce,p as Z,H as D,a as C,e as M,r as I,c as y,l as N,m as P,v as w,w as j,n as V,x as S,u as O,j as q,M as _e,J as pe,P as G}from"../chunks/scheduler.a009160e.js";import{S as x,i as ee,g as A,t as T,c as F,a as E,f as me,b as B,d as H,m as L,e as U}from"../chunks/index.aacbeec2.js";import{C as de,M as he,v as be}from"../chunks/version.4af53474.js";import{g as ve,s as R,S as ke}from"../chunks/submit.354091ff.js";import{c as J}from"../chunks/copy.685b462d.js";function ge(o){let e,l,a=o[8].draw.thanks+"",i,n,t,s,r,c,f=!o[2]&&!o[3]&&K(o),d=o[2]&&Y(o),_=o[3]&&Q(o),p=o[2]&&W(o);return{c(){e=k("p"),l=new D(!1),i=C(),f&&f.c(),n=C(),d&&d.c(),t=C(),_&&_.c(),s=C(),p&&p.c(),r=M(),this.h()},l(u){e=g(u,"P",{});var h=$(e);l=I(h,!1),h.forEach(m),i=y(u),f&&f.l(u),n=y(u),d&&d.l(u),t=y(u),_&&_.l(u),s=y(u),p&&p.l(u),r=M(),this.h()},h(){l.a=null},m(u,h){b(u,e,h),l.m(a,e),b(u,i,h),f&&f.m(u,h),b(u,n,h),d&&d.m(u,h),b(u,t,h),_&&_.m(u,h),b(u,s,h),p&&p.m(u,h),b(u,r,h),c=!0},p(u,h){!u[2]&&!u[3]?f?f.p(u,h):(f=K(u),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),u[2]?d?d.p(u,h):(d=Y(u),d.c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),u[3]?_?_.p(u,h):(_=Q(u),_.c(),_.m(s.parentNode,s)):_&&(_.d(1),_=null),u[2]?p?(p.p(u,h),h&4&&E(p,1)):(p=W(u),p.c(),E(p,1),p.m(r.parentNode,r)):p&&(A(),T(p,1,1,()=>{p=null}),F())},i(u){c||(E(p),c=!0)},o(u){T(p),c=!1},d(u){u&&(m(e),m(i),m(n),m(t),m(s),m(r)),f&&f.d(u),d&&d.d(u),_&&_.d(u),p&&p.d(u)}}}function we(o){let e,l,a=o[8].draw.done+"",i,n,t,s,r;const c=[ye,Ce,Ee],f=[];function d(_,p){return _[6]?0:_[5]?1:2}return n=d(o),t=f[n]=c[n](o),{c(){e=k("p"),l=new D(!1),i=C(),t.c(),s=M(),this.h()},l(_){e=g(_,"P",{});var p=$(e);l=I(p,!1),p.forEach(m),i=y(_),t.l(_),s=M(),this.h()},h(){l.a=null},m(_,p){b(_,e,p),l.m(a,e),b(_,i,p),f[n].m(_,p),b(_,s,p),r=!0},p(_,p){let u=n;n=d(_),n===u?f[n].p(_,p):(A(),T(f[u],1,1,()=>{f[u]=null}),F(),t=f[n],t?t.p(_,p):(t=f[n]=c[n](_),t.c()),E(t,1),t.m(s.parentNode,s))},i(_){r||(E(t),r=!0)},o(_){T(t),r=!1},d(_){_&&(m(e),m(i),m(s)),f[n].d(_)}}}function K(o){let e,l=o[0]?"Loading...":"Start",a,i,n;return{c(){e=k("button"),a=N(l),this.h()},l(t){e=g(t,"BUTTON",{});var s=$(e);a=P(s,l),s.forEach(m),this.h()},h(){e.disabled=o[0]},m(t,s){b(t,e,s),w(e,a),i||(n=j(e,"click",o[12]),i=!0)},p(t,s){s&1&&l!==(l=t[0]?"Loading...":"Start")&&V(a,l),s&1&&(e.disabled=t[0])},d(t){t&&m(e),i=!1,n()}}}function Y(o){let e,l,a=o[8].draw.task+"",i,n,t,s=o[8].draw.note+"",r;return{c(){e=k("p"),l=new D(!1),i=C(),n=k("em"),t=N("Note: "),r=N(s),this.h()},l(c){e=g(c,"P",{});var f=$(e);l=I(f,!1),i=y(f),n=g(f,"EM",{});var d=$(n);t=P(d,"Note: "),r=P(d,s),d.forEach(m),f.forEach(m),this.h()},h(){l.a=i},m(c,f){b(c,e,f),l.m(a,e),w(e,i),w(e,n),w(n,t),w(n,r)},p:S,d(c){c&&m(e)}}}function Q(o){let e,l,a,i,n='<a class="btn" href="/?signup=true">Get in line again</a>';return{c(){e=k("p"),l=N(o[3]),a=C(),i=k("p"),i.innerHTML=n,this.h()},l(t){e=g(t,"P",{class:!0});var s=$(e);l=P(s,o[3]),s.forEach(m),a=y(t),i=g(t,"P",{"data-svelte-h":!0}),O(i)!=="svelte-1q6zez2"&&(i.innerHTML=n),this.h()},h(){q(e,"class","error")},m(t,s){b(t,e,s),w(e,l),b(t,a,s),b(t,i,s)},p(t,s){s&8&&V(l,t[3])},d(t){t&&(m(e),m(a),m(i))}}}function W(o){let e,l,a;function i(t){o[18](t)}let n={preset:o[2],$$slots:{ui:[$e]},$$scope:{ctx:o}};return o[1]!==void 0&&(n.path=o[1]),e=new de({props:n}),o[17](e),Z.push(()=>me(e,"path",i)),e.$on("validate",o[16]),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,s){L(e,t,s),a=!0},p(t,s){const r={};s&4&&(r.preset=t[2]),s&2097152&&(r.$$scope={dirty:s,ctx:t}),!l&&s&2&&(l=!0,r.path=t[1],_e(()=>l=!1)),e.$set(r)},i(t){a||(E(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){o[17](null),U(e,t)}}}function $e(o){let e,l,a="Submit",i,n,t="Clear",s,r;return{c(){e=k("div"),l=k("button"),l.textContent=a,i=C(),n=k("button"),n.textContent=t,this.h()},l(c){e=g(c,"DIV",{slot:!0});var f=$(e);l=g(f,"BUTTON",{"data-svelte-h":!0}),O(l)!=="svelte-16lvxe5"&&(l.textContent=a),i=y(f),n=g(f,"BUTTON",{"data-svelte-h":!0}),O(n)!=="svelte-1919iz5"&&(n.textContent=t),f.forEach(m),this.h()},h(){q(e,"slot","ui")},m(c,f){b(c,e,f),w(e,l),w(e,i),w(e,n),s||(r=[j(l,"click",o[13]),j(n,"click",o[14])],s=!0)},p:S,d(c){c&&m(e),s=!1,pe(r)}}}function Ee(o){let e,l,a="Get in line again",i,n;return{c(){e=k("p"),l=k("button"),l.textContent=a},l(t){e=g(t,"P",{});var s=$(e);l=g(s,"BUTTON",{"data-svelte-h":!0}),O(l)!=="svelte-x3xztd"&&(l.textContent=a),s.forEach(m)},m(t,s){b(t,e,s),w(e,l),i||(n=j(l,"click",o[15]),i=!0)},p:S,i:S,o:S,d(t){t&&m(e),i=!1,n()}}}function Ce(o){let e,l=o[8].rejoined+"",a,i,n,t,s;return t=new ke({props:{buttonText:o[9],title:o[11],url:o[10]}}),{c(){e=k("p"),a=N(l),i=C(),n=k("p"),B(t.$$.fragment)},l(r){e=g(r,"P",{});var c=$(e);a=P(c,l),c.forEach(m),i=y(r),n=g(r,"P",{});var f=$(n);H(t.$$.fragment,f),f.forEach(m)},m(r,c){b(r,e,c),w(e,a),b(r,i,c),b(r,n,c),L(t,n,null),s=!0},p:S,i(r){s||(E(t.$$.fragment,r),s=!0)},o(r){T(t.$$.fragment,r),s=!1},d(r){r&&(m(e),m(i),m(n)),U(t)}}}function ye(o){let e,l,a,i=o[8].issue+"",n,t,s;return{c(){e=k("div"),l=k("details"),a=k("summary"),n=N(i),t=N(`
					Error: `),s=N(o[6]),this.h()},l(r){e=g(r,"DIV",{class:!0});var c=$(e);l=g(c,"DETAILS",{});var f=$(l);a=g(f,"SUMMARY",{});var d=$(a);n=P(d,i),d.forEach(m),t=P(f,`
					Error: `),s=P(f,o[6]),f.forEach(m),c.forEach(m),this.h()},h(){q(e,"class","issue")},m(r,c){b(r,e,c),w(e,l),w(l,a),w(a,n),w(l,t),w(l,s)},p(r,c){c&64&&V(s,r[6])},i:S,o:S,d(r){r&&m(e)}}}function Te(o){let e,l,a,i;const n=[we,ge],t=[];function s(r,c){return r[7]?0:1}return l=s(o),a=t[l]=n[l](o),{c(){e=k("section"),a.c()},l(r){e=g(r,"SECTION",{});var c=$(e);a.l(c),c.forEach(m)},m(r,c){b(r,e,c),t[l].m(e,null),i=!0},p(r,[c]){let f=l;l=s(r),l===f?t[l].p(r,c):(A(),T(t[f],1,1,()=>{t[f]=null}),F(),a=t[l],a?a.p(r,c):(a=t[l]=n[l](r),a.c()),E(a,1),a.m(e,null))},i(r){i||(E(a),i=!0)},o(r){T(a),i=!1},d(r){r&&m(e),t[l].d()}}}const Se="https://pudding.cool/projects/trace-data/drawings";function Ne(o,e,l){const a=ce("copy"),i=a.spread,n=a.url,t=a.title;let s,r,c,f,d,_,p,u,h;async function te(){s=ve("id"),l(0,r=!0);try{const v=await R("checkin",{shortcode:s});if(v.status===200){const{id:z,prev_shortcode:ie,done:fe}=v.data;if(fe)l(7,h=!0);else{const ue=await fetch(`${Se}/${z}/${ie}.txt`);l(2,f=await ue.text())}}else v.status===404?l(3,d="Oh no! This turn has expired."):l(3,d=v.message||"Oh no! Something went wrong.")}catch(v){l(3,d=`Error: ${v.message}`)}finally{l(0,r=!1)}}function le(){_.addFrame()}function ne(){_.resetFrame()}async function se(){try{const v=await R("rejoin",{shortcode:s});l(5,p=!0),l(6,u=v.status===200?null:v.message)}catch(v){console.log(v),l(5,p=!0),l(6,u=v.message)}}async function re({detail:v}){try{v&&(console.log("todo: submit"),l(7,h=!0))}catch(z){console.log(z)}}function ae(v){Z[v?"unshift":"push"](()=>{_=v,l(4,_)})}function oe(v){c=v,l(1,c)}return[r,c,f,d,_,p,u,h,a,i,n,t,te,le,ne,se,re,ae,oe]}class Pe extends x{constructor(e){super(),ee(this,e,Ne,Te,X,{})}}function Me(o){let e,l,a,i;return e=new he({props:{title:o[0],description:o[1],url:o[2],keywords:o[3]}}),a=new Pe({}),{c(){B(e.$$.fragment),l=C(),B(a.$$.fragment)},l(n){H(e.$$.fragment,n),l=y(n),H(a.$$.fragment,n)},m(n,t){L(e,n,t),b(n,l,t),L(a,n,t),i=!0},p:S,i(n){i||(E(e.$$.fragment,n),E(a.$$.fragment,n),i=!0)},o(n){T(e.$$.fragment,n),T(a.$$.fragment,n),i=!1},d(n){n&&m(l),U(e,n),U(a,n)}}}function je(o,e,l){let{data:a}=e;be();const{title:i,description:n,url:t,keywords:s}=J;return G("copy",J),G("data",a.data),o.$$set=r=>{"data"in r&&l(4,a=r.data)},[i,n,t,s,a]}class ze extends x{constructor(e){super(),ee(this,e,je,Me,X,{data:4})}}export{ze as component};
