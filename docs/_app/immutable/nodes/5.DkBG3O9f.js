import{F as We,s as he,R as Te,e as O,T as K,j as A,c as R,a as I,U as J,d as F,l as S,m as C,v as Ne,a0 as ge,i as U,f as k,$ as V,W as Ae,X as Se,Y as je,B as Le,a1 as qe,o as Ue,t as H,b as X,g as Z,D as Be,n as xe,w as Fe,a2 as Ge,a3 as Ve,a4 as He,a5 as pe,k as re,a6 as ve}from"../chunks/scheduler.--4Niz_R.js";import{S as ue,i as ce,a as Q,t as te,f as Xe,h as Ye,b as ie,d as oe,m as ae,e as le}from"../chunks/index.BKFpFCK7.js";import{M as Ke,c as fe}from"../chunks/copy.y5AF-fub.js";import{v as Je}from"../chunks/version.BXal68D9.js";function Qe(r,{delay:s=0,duration:e=400,easing:a=We}={}){const c=+getComputedStyle(r).opacity;return{delay:s,duration:e,easing:a,css:t=>`opacity: ${t*c}`}}function Ze(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ze(r,s=!1){let e=0;for(let a=1;a<r.length;a++){const c=r[a-1],t=r[a];s?e+=Math.sqrt(Math.pow(t.x-c.x,2)+Math.pow(t.y-c.y,2)):e+=Math.sqrt(Math.pow(t[0]-c[0],2)+Math.pow(t[1]-c[1],2))}return e}function _e(r){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",r),e.getTotalLength()}function $e({prev:r,cur:s,strokeWidth:e=1,canvasSize:a=320,targetRatioOverlap:c=.5,targetRatioExcess:t=.5}){const h=document.createElement("canvas"),w=document.createElement("canvas"),g=document.createElement("canvas"),d=document.createElement("canvas");h.width=w.width=a,h.height=w.height=a,g.width=d.width=a,g.height=d.height=a;const l=h.getContext("2d"),u=w.getContext("2d"),i=g.getContext("2d"),_=d.getContext("2d");l.strokeStyle="lightgray",u.strokeStyle="black",i.strokeStyle="lightgray",_.strokeStyle="black",l.lineWidth=e,u.lineWidth=e,i.lineWidth=e*4,_.lineWidth=e*4;const y=new Path2D(r),b=new Path2D(s);l.stroke(y),u.stroke(b),i.stroke(y),_.stroke(b);const n=l.getImageData(0,0,a,a),o=u.getImageData(0,0,a,a),f=i.getImageData(0,0,a,a),m=_.getImageData(0,0,a,a);let p=0,v=0,L=0,D=0;for(let E=0;E<n.data.length;E+=4)n.data[E+3]>0&&(p++,m.data[E+3]>0&&L++);for(let E=0;E<o.data.length;E+=4)o.data[E+3]>0&&(v++,f.data[E+3]<=0&&D++);const W=L/p,M=D/v;return h.remove(),w.remove(),g.remove(),d.remove(),W>c&&M<t}function et({cur:r,prev:s,canvasSize:e,strokeWidth:a,attempts:c}){const t=_e(r),h=_e(s),w=Math.max(t,h);let g=0;t<h?g=t/h:g=h/t;let d=.5,l=.5,u=.5;const i=c<=1?.05:c<=2?.02:0,_=c<=1?.05:c<=2?.02:0,y=c<=1?-.02:0;w>100&&(d=.6),w>400&&(d=.7,l=.6,u=.4),w>600&&(d=.75,l=.7,u=.3),d+=i,l+=_,u+=y;const b=$e({prev:s,cur:r,strokeWidth:a,canvasSize:e,targetRatioOverlap:l,targetRatioExcess:u});return g>=d&&b}const tt=r=>({}),we=r=>({});function be(r){let s;return{c(){s=K("path"),this.h()},l(e){s=J(e,"path",{class:!0,d:!0}),I(s).forEach(F),this.h()},h(){C(s,"class","prev svelte-yl04eo"),C(s,"d",r[4])},m(e,a){U(e,s,a)},p(e,a){a[0]&16&&C(s,"d",e[4])},d(e){e&&F(s)}}}function ye(r){let s,e=r[2]+1+"",a;return{c(){s=O("p"),a=H(e),this.h()},l(c){s=R(c,"P",{class:!0});var t=I(s);a=X(t,e),t.forEach(F),this.h()},h(){C(s,"class","frame svelte-yl04eo")},m(c,t){U(c,s,t),k(s,a)},p(c,t){t[0]&4&&e!==(e=c[2]+1+"")&&Z(a,e)},d(c){c&&F(s)}}}function ke(r){let s,e,a,c;return{c(){s=O("p"),e=O("small"),a=H(r[7]),this.h()},l(t){s=R(t,"P",{class:!0});var h=I(s);e=R(h,"SMALL",{});var w=I(e);a=X(w,r[7]),w.forEach(F),h.forEach(F),this.h()},h(){C(s,"class","message svelte-yl04eo")},m(t,h){U(t,s,h),k(s,e),k(e,a)},p(t,h){h[0]&128&&Z(a,t[7])},i(t){t&&(c||Be(()=>{c=Xe(s,Qe,{}),c.start()}))},o:xe,d(t){t&&F(s)}}}function st(r){let s,e,a,c,t,h,w,g,d,l,u,i,_,y,b,n=r[4]&&!r[6]&&be(r),o=r[1]&&ye(r),f=r[7]&&ke(r);const m=r[25].ui,p=Te(m,r,r[24],we);return{c(){s=O("div"),e=O("div"),a=K("svg"),c=K("g"),t=K("path"),h=A(),w=K("svg"),g=K("g"),n&&n.c(),d=K("path"),l=A(),o&&o.c(),u=A(),f&&f.c(),i=A(),p&&p.c(),this.h()},l(v){s=R(v,"DIV",{class:!0});var L=I(s);e=R(L,"DIV",{class:!0,style:!0});var D=I(e);a=J(D,"svg",{class:!0});var W=I(a);c=J(W,"g",{});var M=I(c);t=J(M,"path",{d:!0,class:!0}),I(t).forEach(F),M.forEach(F),W.forEach(F),h=S(D),w=J(D,"svg",{class:!0,"aria-label":!0});var E=I(w);g=J(E,"g",{});var P=I(g);n&&n.l(P),d=J(P,"path",{d:!0,class:!0}),I(d).forEach(F),P.forEach(F),E.forEach(F),l=S(D),o&&o.l(D),u=S(D),f&&f.l(D),D.forEach(F),L.forEach(F),i=S(v),p&&p.l(v),this.h()},h(){C(t,"d",r[5]),C(t,"class","svelte-yl04eo"),C(a,"class","preview svelte-yl04eo"),C(d,"d",r[3]),C(d,"class","svelte-yl04eo"),C(w,"class","draw shadow svelte-yl04eo"),C(w,"aria-label","a drawing canvas to trace an image drawn by a previous user"),C(e,"class","canvas svelte-yl04eo"),Ne(e,"--stroke-width",Pe),C(s,"class","c svelte-yl04eo"),ge(s,"disabled",r[0])},m(v,L){U(v,s,L),k(s,e),k(e,a),k(a,c),k(c,t),k(e,h),k(e,w),k(w,g),n&&n.m(g,null),k(g,d),k(e,l),o&&o.m(e,null),k(e,u),f&&f.m(e,null),U(v,i,L),p&&p.m(v,L),_=!0,y||(b=[V(s,"pointerdown",r[8]),V(s,"pointermove",r[9]),V(s,"pointerup",r[10]),V(s,"pointerleave",r[10])],y=!0)},p(v,L){(!_||L[0]&32)&&C(t,"d",v[5]),v[4]&&!v[6]?n?n.p(v,L):(n=be(v),n.c(),n.m(g,d)):n&&(n.d(1),n=null),(!_||L[0]&8)&&C(d,"d",v[3]),v[1]?o?o.p(v,L):(o=ye(v),o.c(),o.m(e,u)):o&&(o.d(1),o=null),v[7]?f?(f.p(v,L),L[0]&128&&Q(f,1)):(f=ke(v),f.c(),Q(f,1),f.m(e,null)):f&&(f.d(1),f=null),(!_||L[0]&1)&&ge(s,"disabled",v[0]),p&&p.p&&(!_||L[0]&16777216)&&Ae(p,m,v,v[24],_?je(m,v[24],L,tt):Se(v[24]),we)},i(v){_||(Q(f),Q(p,v),_=!0)},o(v){te(p,v),_=!1},d(v){v&&(F(s),F(i)),n&&n.d(),o&&o.d(),f&&f.d(),p&&p.d(v),y=!1,Le(b)}}}const Pe=4,$=320,nt=8;function rt(r){let s=[];for(let e of r)s.push(...e);return s}function Ee(r){const s=+r.offsetX.toFixed(1),e=+r.offsetY.toFixed(1);return[s,e]}function it(r,s,e){let a,c,{$$slots:t={},$$scope:h}=s,{preset:w}=s,{path:g}=s,{paths:d}=s,{disabled:l}=s,{showFrameIndex:u}=s,{inkRem:i=1}=s;const _=$,y=$*5,b=qe(),n=!!w;let o=!1,f=!1,m=0,p=[],v="",L="",D=!0,W;const M=Re,E=Ie,P=Oe,T=de,B=Y;function q(x){e(7,Y=null),e(20,o=!1),e(13,i=1),f=!0;const j=Ee(x);e(21,p[m]=[],p),p[m].push(j)}function G(x){if(!f||o)return;const j=Ee(x);p[m].push(j);const N=ze(p[m]);N>y&&e(20,o=!0),e(13,i=Math.max(0,(y-N)/y)),e(21,p=[...p])}function z(){f=!1}function Me(){if(!p[m]){e(7,Y="Draw something first!"),b("validate",!1),setTimeout(()=>{e(7,Y=null)},2e3);return}if(n&&m>0){const x=[...p[m]].map(([se,ne])=>({x:se,y:ne})),j=[...p[m-1]].map(([se,ne])=>({x:se,y:ne})),N=Math.sqrt($**2+_**2);e(22,D=et({cur:x,prev:j,diagonal:N,canvasSize:$,strokeWidth:Pe})),b("validate",D)}else e(22,D=!0);D?(e(4,v=c),e(2,m+=1)):setTimeout(()=>{e(22,D=void 0)},2e3),e(23,a=[]),e(13,i=1)}function de(){e(21,p[m]=[],p),e(5,L=""),e(13,i=1),e(22,D=!0)}function me(x=0){const j=p[x].map(N=>N.join(" ")).join("L");e(5,L=W?`M${j}`:""),setTimeout(()=>{let N=x+1;N>m-1&&(N=0),W&&me(N)},1e3/nt)}function Ie(){Me()}function Oe(){de()}function Y(x){e(7,Y=x)}function Re(){e(6,W=!W),W?me():e(5,L="")}return Ue(()=>{e(4,v=w||""),v&&(e(2,m=1),e(21,p[0]=rt(v.split("M").filter(x=>x).map(x=>x.split("L").map(j=>j.split(" ").map(N=>+N)))),p))}),r.$$set=x=>{"preset"in x&&e(14,w=x.preset),"path"in x&&e(11,g=x.path),"paths"in x&&e(12,d=x.paths),"disabled"in x&&e(0,l=x.disabled),"showFrameIndex"in x&&e(1,u=x.showFrameIndex),"inkRem"in x&&e(13,i=x.inkRem),"$$scope"in x&&e(24,h=x.$$scope)},r.$$.update=()=>{var x;r.$$.dirty[0]&2097156&&e(23,a=(x=p[m])==null?void 0:x.map(j=>j.join(" ")).join("L")),r.$$.dirty[0]&8388608&&e(3,c=a!=null&&a.length?`M${a}`:""),r.$$.dirty[0]&2097152&&e(12,d=p.map(j=>`M${j.map(N=>N.join(" ")).join("L")}`)),r.$$.dirty[0]&8&&e(11,g=c),r.$$.dirty[0]&5242880&&e(7,Y=D===!1?"I think you can do better!":o?"Out of ink":null)},[l,u,m,c,v,L,W,Y,q,G,z,g,d,i,w,M,E,P,T,B,o,p,D,a,h,t]}class ot extends ue{constructor(s){super(),ce(this,s,it,st,he,{preset:14,path:11,paths:12,disabled:0,showFrameIndex:1,inkRem:13,preview:15,addFrame:16,clearFrame:17,resetFrame:18,addMessage:19},null,[-1,-1])}get preview(){return this.$$.ctx[15]}get addFrame(){return this.$$.ctx[16]}get clearFrame(){return this.$$.ctx[17]}get resetFrame(){return this.$$.ctx[18]}get addMessage(){return this.$$.ctx[19]}}function ee(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var De={exports:{}};(function(r,s){(function(e){r.exports=e()})(function(){return function e(a,c,t){function h(d,l){if(!c[d]){if(!a[d]){var u=typeof ee=="function"&&ee;if(!l&&u)return u(d,!0);if(w)return w(d,!0);var i=new Error("Cannot find module '"+d+"'");throw i.code="MODULE_NOT_FOUND",i}var _=c[d]={exports:{}};a[d][0].call(_.exports,function(y){var b=a[d][1][y];return h(b||y)},_,_.exports,e,a,c,t)}return c[d].exports}for(var w=typeof ee=="function"&&ee,g=0;g<t.length;g++)h(t[g]);return h}({1:[function(e,a,c){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}a.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(l){if(!w(l)||l<0||isNaN(l))throw TypeError("n must be a positive number");return this._maxListeners=l,this},t.prototype.emit=function(l){var u,i,_,y,b,n;if(this._events||(this._events={}),l==="error"&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(u=arguments[1],u instanceof Error)throw u;var o=new Error('Uncaught, unspecified "error" event. ('+u+")");throw o.context=u,o}if(i=this._events[l],d(i))return!1;if(h(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:y=Array.prototype.slice.call(arguments,1),i.apply(this,y)}else if(g(i))for(y=Array.prototype.slice.call(arguments,1),n=i.slice(),_=n.length,b=0;b<_;b++)n[b].apply(this,y);return!0},t.prototype.addListener=function(l,u){var i;if(!h(u))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",l,h(u.listener)?u.listener:u),this._events[l]?g(this._events[l])?this._events[l].push(u):this._events[l]=[this._events[l],u]:this._events[l]=u,g(this._events[l])&&!this._events[l].warned&&(d(this._maxListeners)?i=t.defaultMaxListeners:i=this._maxListeners,i&&i>0&&this._events[l].length>i&&(this._events[l].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[l].length),typeof console.trace=="function"&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(l,u){if(!h(u))throw TypeError("listener must be a function");var i=!1;function _(){this.removeListener(l,_),i||(i=!0,u.apply(this,arguments))}return _.listener=u,this.on(l,_),this},t.prototype.removeListener=function(l,u){var i,_,y,b;if(!h(u))throw TypeError("listener must be a function");if(!this._events||!this._events[l])return this;if(i=this._events[l],y=i.length,_=-1,i===u||h(i.listener)&&i.listener===u)delete this._events[l],this._events.removeListener&&this.emit("removeListener",l,u);else if(g(i)){for(b=y;b-- >0;)if(i[b]===u||i[b].listener&&i[b].listener===u){_=b;break}if(_<0)return this;i.length===1?(i.length=0,delete this._events[l]):i.splice(_,1),this._events.removeListener&&this.emit("removeListener",l,u)}return this},t.prototype.removeAllListeners=function(l){var u,i;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[l]&&delete this._events[l],this;if(arguments.length===0){for(u in this._events)u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[l],h(i))this.removeListener(l,i);else if(i)for(;i.length;)this.removeListener(l,i[i.length-1]);return delete this._events[l],this},t.prototype.listeners=function(l){var u;return!this._events||!this._events[l]?u=[]:h(this._events[l])?u=[this._events[l]]:u=this._events[l].slice(),u},t.prototype.listenerCount=function(l){if(this._events){var u=this._events[l];if(h(u))return 1;if(u)return u.length}return 0},t.listenerCount=function(l,u){return l.listenerCount(u)};function h(l){return typeof l=="function"}function w(l){return typeof l=="number"}function g(l){return typeof l=="object"&&l!==null}function d(l){return l===void 0}},{}],2:[function(e,a,c){var t,h,w,g,d;d=navigator.userAgent.toLowerCase(),g=navigator.platform.toLowerCase(),t=d.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],w=t[1]==="ie"&&document.documentMode,h={name:t[1]==="version"?t[3]:t[1],version:w||parseFloat(t[1]==="opera"&&t[4]?t[4]:t[2]),platform:{name:d.match(/ip(?:ad|od|hone)/)?"ios":(d.match(/(?:webos|android)/)||g.match(/mac|win|linux/)||["other"])[0]}},h[h.name]=!0,h[h.name+parseInt(h.version,10)]=!0,h.platform[h.platform.name]=!0,a.exports=h},{}],3:[function(e,a,c){var t,h,w,g=function(i,_){for(var y in _)d.call(_,y)&&(i[y]=_[y]);function b(){this.constructor=i}return b.prototype=_.prototype,i.prototype=new b,i.__super__=_.prototype,i},d={}.hasOwnProperty,l=[].indexOf||function(i){for(var _=0,y=this.length;_<y;_++)if(_ in this&&this[_]===i)return _;return-1},u=[].slice;t=e("events").EventEmitter,w=e("./browser.coffee"),h=function(i){var _,y;g(b,i),_={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},y={delay:500,copy:!1};function b(n){var o,f,m;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(n);for(f in _)m=_[f],(o=this.options)[f]==null&&(o[f]=m)}return b.prototype.setOption=function(n,o){if(this.options[n]=o,this._canvas!=null&&(n==="width"||n==="height"))return this._canvas[n]=o},b.prototype.setOptions=function(n){var o,f,m;f=[];for(o in n)d.call(n,o)&&(m=n[o],f.push(this.setOption(o,m)));return f},b.prototype.addFrame=function(n,o){var f,m;o==null&&(o={}),f={},f.transparent=this.options.transparent;for(m in y)f[m]=o[m]||y[m];if(this.options.width==null&&this.setOption("width",n.width),this.options.height==null&&this.setOption("height",n.height),typeof ImageData<"u"&&ImageData!==null&&n instanceof ImageData)f.data=n.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&n instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&n instanceof WebGLRenderingContext)o.copy?f.data=this.getContextData(n):f.context=n;else if(n.childNodes!=null)o.copy?f.data=this.getImageData(n):f.image=n;else throw new Error("Invalid image");return this.frames.push(f)},b.prototype.render=function(){var n,o,f;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var m,p,v;for(v=[],m=0,p=this.frames.length;0<=p?m<p:m>p;0<=p?++m:--m)v.push(null);return v}).call(this),o=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(n=0,f=o;0<=f?n<f:n>f;0<=f?++n:--n)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},b.prototype.abort=function(){for(var n;n=this.activeWorkers.shift(),n!=null;)this.log("killing active worker"),n.terminate();return this.running=!1,this.emit("abort")},b.prototype.spawnWorkers=function(){var n,o,f;return n=Math.min(this.options.workers,this.frames.length),(function(){f=[];for(var m=o=this.freeWorkers.length;o<=n?m<n:m>n;o<=n?m++:m--)f.push(m);return f}).apply(this).forEach(function(m){return function(p){var v;return m.log("spawning worker "+p),v=new Worker(m.options.workerScript),v.onmessage=function(L){return m.activeWorkers.splice(m.activeWorkers.indexOf(v),1),m.freeWorkers.push(v),m.frameFinished(L.data)},m.freeWorkers.push(v)}}(this)),n},b.prototype.frameFinished=function(n){var o,f;if(this.log("frame "+n.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[n.index]=n,this.options.globalPalette===!0&&(this.options.globalPalette=n.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(o=1,f=this.freeWorkers.length;1<=f?o<f:o>f;1<=f?++o:--o)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},b.prototype.finishRendering=function(){var n,o,f,m,p,v,L,D,W,M,E,P,T,B,q,G;for(D=0,B=this.imageParts,p=0,W=B.length;p<W;p++)o=B[p],D+=(o.data.length-1)*o.pageSize+o.cursor;for(D+=o.pageSize-o.cursor,this.log("rendering finished - filesize "+Math.round(D/1e3)+"kb"),n=new Uint8Array(D),P=0,q=this.imageParts,v=0,M=q.length;v<M;v++)for(o=q[v],G=o.data,f=L=0,E=G.length;L<E;f=++L)T=G[f],n.set(T,P),f===o.data.length-1?P+=o.cursor:P+=o.pageSize;return m=new Blob([n],{type:"image/gif"}),this.emit("finished",m,n)},b.prototype.renderNextFrame=function(){var n,o,f;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return n=this.frames[this.nextFrame++],f=this.freeWorkers.shift(),o=this.getTask(n),this.log("starting frame "+(o.index+1)+" of "+this.frames.length),this.activeWorkers.push(f),f.postMessage(o)},b.prototype.getContextData=function(n){return n.getImageData(0,0,this.options.width,this.options.height).data},b.prototype.getImageData=function(n){var o;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),o=this._canvas.getContext("2d"),o.setFill=this.options.background,o.fillRect(0,0,this.options.width,this.options.height),o.drawImage(n,0,0),this.getContextData(o)},b.prototype.getTask=function(n){var o,f;if(o=this.frames.indexOf(n),f={index:o,last:o===this.frames.length-1,delay:n.delay,transparent:n.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:w.name==="chrome"},n.data!=null)f.data=n.data;else if(n.context!=null)f.data=this.getContextData(n.context);else if(n.image!=null)f.data=this.getImageData(n.image);else throw new Error("Invalid frame");return f},b.prototype.log=function(){var n;if(n=1<=arguments.length?u.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,n)},b}(t),a.exports=h},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(De);var at=De.exports;const lt=Ze(at);async function ft(r,s){const e=new Path2D(s);r.strokeStyle="#000",r.lineWidth=4,r.lineCap="round",r.stroke(e)}async function ht({frames:r,width:s,height:e,fps:a}){return new Promise(async(c,t)=>{const h=Math.floor(1e3/a),w=navigator.hardwareConcurrency||4,g=Math.max(2,w/2),d=new lt({workers:g,workerScript:"../assets/gif.worker.js",quality:1,width:s,height:e}),l=document.createElement("canvas"),u=l.getContext("2d");l.width=s,l.height=e;for(const i of r)u.clearRect(0,0,s,e),u.fillStyle="#fff",u.fillRect(0,0,s,e),await ft(u,i),d.addFrame(u,{copy:!0,delay:h});d.on("finished",i=>{c(URL.createObjectURL(i))}),d.on("error",()=>{console.log(error),t("Error rendering gif")}),d.render()})}function ut(r){let s,e,a="Frames:",c,t,h,w="Add",g,d,l="Clear",u,i,_=r[6]?"Stop":"Play",y,b,n,o;return{c(){s=O("div"),e=O("p"),e.textContent=a,c=A(),t=O("div"),h=O("button"),h.textContent=w,g=A(),d=O("button"),d.textContent=l,u=A(),i=O("button"),y=H(_),b=H(" Preview"),this.h()},l(f){s=R(f,"DIV",{class:!0,slot:!0});var m=I(s);e=R(m,"P",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1kove1c"&&(e.textContent=a),c=S(m),t=R(m,"DIV",{class:!0});var p=I(t);h=R(p,"BUTTON",{class:!0,"data-svelte-h":!0}),re(h)!=="svelte-u2k0bg"&&(h.textContent=w),g=S(p),d=R(p,"BUTTON",{class:!0,"data-svelte-h":!0}),re(d)!=="svelte-vb2at4"&&(d.textContent=l),u=S(p),i=R(p,"BUTTON",{class:!0});var v=I(i);y=X(v,_),b=X(v," Preview"),v.forEach(F),p.forEach(F),m.forEach(F),this.h()},h(){C(e,"class","svelte-2vvmeo"),C(h,"class","small svelte-2vvmeo"),C(d,"class","small svelte-2vvmeo"),C(i,"class","small svelte-2vvmeo"),C(t,"class","buttons svelte-2vvmeo"),C(s,"class","ui svelte-2vvmeo"),C(s,"slot","ui")},m(f,m){U(f,s,m),k(s,e),k(s,c),k(s,t),k(t,h),k(t,g),k(t,d),k(t,u),k(t,i),k(i,y),k(i,b),n||(o=[V(h,"click",r[7]),V(d,"click",r[8]),V(i,"click",r[9])],n=!0)},p(f,m){m&64&&_!==(_=f[6]?"Stop":"Play")&&Z(y,_)},d(f){f&&F(s),n=!1,Le(o)}}}function Ce(r){let s,e,a,c,t,h;return{c(){s=O("div"),e=O("a"),a=H("Download"),c=A(),t=O("img"),this.h()},l(w){s=R(w,"DIV",{class:!0});var g=I(s);e=R(g,"A",{role:!0,href:!0,download:!0});var d=I(e);a=X(d,"Download"),d.forEach(F),c=S(g),t=R(g,"IMG",{src:!0,alt:!0}),g.forEach(F),this.h()},h(){C(e,"role","button"),C(e,"href",r[4]),C(e,"download","animation.gif"),pe(t.src,h=r[4])||C(t,"src",h),C(t,"alt","animation"),C(s,"class","share svelte-2vvmeo")},m(w,g){U(w,s,g),k(s,e),k(e,a),k(s,c),k(s,t)},p(w,g){g&16&&C(e,"href",w[4]),g&16&&!pe(t.src,h=w[4])&&C(t,"src",h)},d(w){w&&F(s)}}}function ct(r){let s,e,a,c,t,h,w,g,d,l,u,i,_,y,b,n,o=r[5]?"Rendering":"Share",f,m,p,v,L;function D(E){r[12](E)}let W={showFrameIndex:!0,$$slots:{ui:[ut]},$$scope:{ctx:r}};r[3]!==void 0&&(W.paths=r[3]),i=new ot({props:W}),r[11](i),Fe.push(()=>Ye(i,"paths",D));let M=r[4]&&Ce(r);return{c(){s=O("section"),e=O("p"),a=new Ge(!1),c=A(),t=O("br"),h=A(),w=O("small"),g=O("em"),d=H("Note: "),l=H(r[1]),u=A(),ie(i.$$.fragment),y=A(),b=O("div"),n=O("button"),f=H(o),m=A(),M&&M.c(),this.h()},l(E){s=R(E,"SECTION",{id:!0,class:!0});var P=I(s);e=R(P,"P",{class:!0});var T=I(e);a=Ve(T,!1),c=S(T),t=R(T,"BR",{}),h=S(T),w=R(T,"SMALL",{});var B=I(w);g=R(B,"EM",{});var q=I(g);d=X(q,"Note: "),l=X(q,r[1]),q.forEach(F),B.forEach(F),T.forEach(F),u=S(P),oe(i.$$.fragment,P),y=S(P),b=R(P,"DIV",{class:!0});var G=I(b);n=R(G,"BUTTON",{class:!0});var z=I(n);f=X(z,o),z.forEach(F),G.forEach(F),m=S(P),M&&M.l(P),P.forEach(F),this.h()},h(){a.a=c,C(e,"class","svelte-2vvmeo"),n.disabled=r[5],C(n,"class","svelte-2vvmeo"),C(b,"class","render svelte-2vvmeo"),C(s,"id","playground"),C(s,"class","svelte-2vvmeo")},m(E,P){U(E,s,P),k(s,e),a.m(r[0],e),k(e,c),k(e,t),k(e,h),k(e,w),k(w,g),k(g,d),k(g,l),k(s,u),ae(i,s,null),k(s,y),k(s,b),k(b,n),k(n,f),k(s,m),M&&M.m(s,null),p=!0,v||(L=V(n,"click",r[10]),v=!0)},p(E,[P]){(!p||P&1)&&a.p(E[0]),(!p||P&2)&&Z(l,E[1]);const T={};P&8256&&(T.$$scope={dirty:P,ctx:E}),!_&&P&8&&(_=!0,T.paths=E[3],He(()=>_=!1)),i.$set(T),(!p||P&32)&&o!==(o=E[5]?"Rendering":"Share")&&Z(f,o),(!p||P&32)&&(n.disabled=E[5]),E[4]?M?M.p(E,P):(M=Ce(E),M.c(),M.m(s,null)):M&&(M.d(1),M=null)},i(E){p||(Q(i.$$.fragment,E),p=!0)},o(E){te(i.$$.fragment,E),p=!1},d(E){E&&F(s),r[11](null),le(i),M&&M.d(),v=!1,L()}}}function dt(r,s,e){let{text:a="Make an animation!"}=s,{note:c}=s,t,h,w,g,d;function l(){t.addFrame()}function u(){t.clearFrame()}function i(){t.preview(),e(6,d=!d)}async function _(){e(5,g=!0),e(4,w=await ht({frames:h,width:320,height:320,fps:12})),e(5,g=!1)}function y(n){Fe[n?"unshift":"push"](()=>{t=n,e(2,t)})}function b(n){h=n,e(3,h)}return r.$$set=n=>{"text"in n&&e(0,a=n.text),"note"in n&&e(1,c=n.note)},[a,c,t,h,w,g,d,l,u,i,_,y,b]}class mt extends ue{constructor(s){super(),ce(this,s,dt,ct,he,{text:0,note:1})}}function gt(r){let s,e,a,c;return s=new Ke({props:{title:r[0],description:r[1],url:r[2],keywords:r[3]}}),a=new mt({props:{note:fe.playgroundNote}}),{c(){ie(s.$$.fragment),e=A(),ie(a.$$.fragment)},l(t){oe(s.$$.fragment,t),e=S(t),oe(a.$$.fragment,t)},m(t,h){ae(s,t,h),U(t,e,h),ae(a,t,h),c=!0},p:xe,i(t){c||(Q(s.$$.fragment,t),Q(a.$$.fragment,t),c=!0)},o(t){te(s.$$.fragment,t),te(a.$$.fragment,t),c=!1},d(t){t&&F(e),le(s,t),le(a,t)}}}function pt(r,s,e){let{data:a}=s;Je();const{title:c,description:t,url:h,keywords:w}=fe;return ve("copy",fe),ve("data",a.data),r.$$set=g=>{"data"in g&&e(4,a=g.data)},[c,t,h,w,a]}class yt extends ue{constructor(s){super(),ce(this,s,pt,gt,he,{data:4})}}export{yt as component};
