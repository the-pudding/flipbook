import{s as it,n as st,i as Qt,r as Zt,o as $t,f as te,h as Lt,j as Ft}from"../chunks/scheduler.2539f17d.js";import{S as lt,i as ut,g as b,e as It,z as ee,h as M,f as l,k as o,y as p,A as ne,a as F,B as U,s as K,m as Q,j as O,C as X,c as W,n as Z,D as Y,E as St,l as V,F as $,o as ot,d as et,p as ae,t as nt,b as re,G as Nt,r as vt,u as _t,v as yt,w as bt}from"../chunks/index.b9564c26.js";import{e as Rt}from"../chunks/each.e59479a4.js";function jt(n,t,e){const a=n.slice();return a[5]=t[e],a}function qt(n){let t,e;return{c(){t=b("link"),this.h()},l(a){t=M(a,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){o(t,"rel","preload"),o(t,"href",e=n[5]),o(t,"as","font"),o(t,"type","font/woff2"),o(t,"crossorigin","")},m(a,r){F(a,t,r)},p(a,r){r&16&&e!==(e=a[5])&&o(t,"href",e)},d(a){a&&l(t)}}}function oe(n){let t,e,a,r,s,c,m,u,f,h,_,i,g,E,w,N,z,I,L,C,q,P,T,S,B,R;document.title=t=n[0];let H=Rt(n[4]),A=[];for(let y=0;y<H.length;y+=1)A[y]=qt(jt(n,H,y));return{c(){e=b("meta"),a=b("meta"),r=b("meta"),s=b("meta"),c=b("meta"),m=b("meta"),u=b("meta"),f=b("meta"),h=b("meta"),_=b("meta"),g=b("meta"),E=b("meta"),w=b("meta"),N=b("meta"),z=b("meta"),I=b("meta"),L=b("meta"),C=b("meta"),q=b("meta"),T=b("meta"),S=b("link");for(let y=0;y<A.length;y+=1)A[y].c();R=It(),this.h()},l(y){const d=ee("svelte-1htu80s",document.head);e=M(d,"META",{name:!0,content:!0}),a=M(d,"META",{name:!0,content:!0}),r=M(d,"META",{name:!0,content:!0}),s=M(d,"META",{property:!0,content:!0}),c=M(d,"META",{property:!0,content:!0}),m=M(d,"META",{property:!0,content:!0}),u=M(d,"META",{property:!0,content:!0}),f=M(d,"META",{property:!0,content:!0}),h=M(d,"META",{property:!0,content:!0}),_=M(d,"META",{property:!0,content:!0}),g=M(d,"META",{property:!0,content:!0}),E=M(d,"META",{property:!0,content:!0}),w=M(d,"META",{property:!0,content:!0}),N=M(d,"META",{name:!0,content:!0}),z=M(d,"META",{name:!0,content:!0}),I=M(d,"META",{name:!0,content:!0}),L=M(d,"META",{name:!0,content:!0}),C=M(d,"META",{name:!0,content:!0}),q=M(d,"META",{name:!0,content:!0}),T=M(d,"META",{name:!0,content:!0}),S=M(d,"LINK",{rel:!0,href:!0});for(let k=0;k<A.length;k+=1)A[k].l(d);R=It(),d.forEach(l),this.h()},h(){o(e,"name","description"),o(e,"content",n[1]),o(a,"name","author"),o(a,"content","The Pudding"),o(r,"name","news_keywords"),o(r,"content",n[3]),o(s,"property","og:title"),o(s,"content",n[0]),o(c,"property","og:site_name"),o(c,"content","The Pudding"),o(m,"property","og:url"),o(m,"content",n[2]),o(u,"property","og:description"),o(u,"content",n[1]),o(f,"property","og:type"),o(f,"content","article"),o(h,"property","og:locale"),o(h,"content","en_US"),o(_,"property","og:image"),o(_,"content",i=n[2]+"/assets/social-facebook.jpg"),o(g,"property","og:image:type"),o(g,"content","image/jpeg"),o(E,"property","og:image:width"),o(E,"content","1200"),o(w,"property","og:image:height"),o(w,"content","600"),o(N,"name","twitter:card"),o(N,"content","summary_large_image"),o(z,"name","twitter:site"),o(z,"content","https://pudding.cool"),o(I,"name","twitter:creator"),o(I,"content","@puddingviz"),o(L,"name","twitter:title"),o(L,"content",n[0]),o(C,"name","twitter:description"),o(C,"content",n[1]),o(q,"name","twitter:image:src"),o(q,"content",P=n[2]+"/assets/social-twitter.jpg"),o(T,"name","robots"),o(T,"content","max-image-preview:large"),o(S,"rel","canonical"),o(S,"href",B=n[2]+"/")},m(y,d){p(document.head,e),p(document.head,a),p(document.head,r),p(document.head,s),p(document.head,c),p(document.head,m),p(document.head,u),p(document.head,f),p(document.head,h),p(document.head,_),p(document.head,g),p(document.head,E),p(document.head,w),p(document.head,N),p(document.head,z),p(document.head,I),p(document.head,L),p(document.head,C),p(document.head,q),p(document.head,T),p(document.head,S);for(let k=0;k<A.length;k+=1)A[k]&&A[k].m(document.head,null);p(document.head,R)},p(y,[d]){if(d&1&&t!==(t=y[0])&&(document.title=t),d&2&&o(e,"content",y[1]),d&8&&o(r,"content",y[3]),d&1&&o(s,"content",y[0]),d&4&&o(m,"content",y[2]),d&2&&o(u,"content",y[1]),d&4&&i!==(i=y[2]+"/assets/social-facebook.jpg")&&o(_,"content",i),d&1&&o(L,"content",y[0]),d&2&&o(C,"content",y[1]),d&4&&P!==(P=y[2]+"/assets/social-twitter.jpg")&&o(q,"content",P),d&4&&B!==(B=y[2]+"/")&&o(S,"href",B),d&16){H=Rt(y[4]);let k;for(k=0;k<H.length;k+=1){const J=jt(y,H,k);A[k]?A[k].p(J,d):(A[k]=qt(J),A[k].c(),A[k].m(R.parentNode,R))}for(;k<A.length;k+=1)A[k].d(1);A.length=H.length}},i:st,o:st,d(y){l(e),l(a),l(r),l(s),l(c),l(m),l(u),l(f),l(h),l(_),l(g),l(E),l(w),l(N),l(z),l(I),l(L),l(C),l(q),l(T),l(S),ne(A,y),l(R)}}}function se(n,t,e){let{title:a="Title TK"}=t,{description:r="Description TK"}=t,{url:s="https://pudding.cool"}=t,{keywords:c=""}=t,{preloadFont:m=[]}=t;return n.$$set=u=>{"title"in u&&e(0,a=u.title),"description"in u&&e(1,r=u.description),"url"in u&&e(2,s=u.url),"keywords"in u&&e(3,c=u.keywords),"preloadFont"in u&&e(4,m=u.preloadFont)},[a,r,s,c,m]}class ie extends lt{constructor(t){super(),ut(this,t,se,oe,it,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function Dt(n,{delay:t=0,duration:e=400,easing:a=Qt}={}){const r=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:a,css:s=>`opacity: ${s*r}`}}var Ot=function(n){return n[n.length-1]},Bt=function(n){return n.reduce(function(t,e){return t+e},0)},gt=function(n){var t=n.reduce(function(e,a){return a+e},0);return t/n.length},kt=function(n,t){return{x:n.x-t.x,y:n.y-t.y}},Gt=function(n){var t=n.x,e=n.y;return Math.sqrt(t*t+e*e)},tt=function(n,t){return Gt(kt(n,t))},Mt=function(n){var t=n[0],e=n.slice(1);return e.reduce(function(a,r){var s=tt(r,t);return t=r,a+s},0)},le=function(n,t,e){var a=kt(t,n),r=e/Gt(a);return{x:t.x+r*a.x,y:t.y+r*a.y}},wt=function(n,t){for(var e=t.numPoints,a=e===void 0?50:e,r=Mt(n),s=r/(a-1),c=[n[0]],m=Ot(n),u=n.slice(1),f=0;f<a-2;f++)for(var h=Ot(c),_=s,i=!1;!i;){var g=tt(h,u[0]);if(g<_)_-=g,h=u.shift();else{var E=le(h,u[0],_-g);c.push(E),i=!0}}return c.push(m),c},ue=function(n,t){return n.map(function(e){return{x:Math.cos(-1*t)*e.x-Math.sin(-1*t)*e.y,y:Math.sin(-1*t)*e.x+Math.cos(-1*t)*e.y}})},xt=function(n,t){for(var e=n.length>=t.length?n:t,a=n.length>=t.length?t:n,r=function(f,h,_,i){if(f===0&&h===0)return tt(e[0],a[0]);if(f>0&&h===0)return Math.max(_[0],tt(e[f],a[0]));var g=i[i.length-1];return f===0&&h>0?Math.max(g,tt(e[0],a[h])):Math.max(Math.min(_[h],_[h-1],g),tt(e[f],a[h]))},s=[],c=0;c<e.length;c++){for(var m=[],u=0;u<a.length;u++)m.push(r(c,u,s,m));s=m}return s[a.length-1]},Ht=function(n,t){t===void 0&&(t={});var e=t.rebalance,a=e===void 0?!0:e,r=t.estimationPoints,s=r===void 0?50:r,c=a?wt(n,{numPoints:s}):n,m=gt(c.map(function(i){return i.x})),u=gt(c.map(function(i){return i.y})),f={x:m,y:u},h=c.map(function(i){return kt(i,f)}),_=Math.sqrt(gt(h.map(function(i){var g=i.x,E=i.y;return g*g+E*E})));return h.map(function(i){return{x:i.x/_,y:i.y/_}})},ce=function(n,t){if(n.length!==t.length)throw new Error("curve and relativeCurve must have the same length");var e=Bt(n.map(function(r,s){var c=r.x,m=r.y;return m*t[s].x-c*t[s].y})),a=Bt(n.map(function(r,s){var c=r.x,m=r.y;return c*t[s].x+m*t[s].y}));return Math.atan2(e,a)},Kt=function(n,t,e){e===void 0&&(e={});var a=e.estimationPoints,r=a===void 0?50:a,s=e.rotations,c=s===void 0?10:s,m=e.restrictRotationAngle,u=m===void 0?Math.PI:m,f=e.checkRotations,h=f===void 0?!0:f;if(Math.abs(u)>Math.PI)throw new Error("restrictRotationAngle cannot be larger than PI");var _=Ht(n,{estimationPoints:r}),i=Ht(t,{estimationPoints:r}),g=Math.sqrt(Mt(_)*Mt(i)),E=[0];if(h){var w=ce(_,i);w>Math.PI&&(w=w-2*Math.PI),w!==0&&Math.abs(w)<u&&E.push(w);for(var N=0;N<c;N++){var z=-1*u+2*N*u/(c-1);z!==0&&z!==Math.PI&&E.push(z)}}var I=1/0;return E.forEach(function(L){var C=ue(_,L),q=xt(C,i);q<I&&(I=q)}),Math.max(1-I/(g/Math.sqrt(2)),0)};function Wt(n){let t=0;for(let e=1;e<n.length;e++){const a=n[e-1],r=n[e];t+=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))}return t}function fe({cur:n,prev:t,diagonal:e}){const a=Math.max(t.length,n.length),r=wt(n,{numPoints:a}),s=wt(t,{numPoints:a}),c=[...s].reverse(),m={estimationPoints:200,rotations:30},u=Kt(s,r,m),f=Kt(c,r,m),h=Wt(r),_=Wt(s),i=Math.max(h,_),g=xt(s,r),E=xt(c,r),w=g/e,N=E/e,z=g/i,I=E/i,L=u>=.9&&(w<=.2||z<=.5),C=f>=.9&&(N<=.2||I<=.5);return{valid:L||C,debug1:{similarity:u.toFixed(2),diag:w.toFixed(2),len:z.toFixed(2),pass:L},debug2:{similarity:f.toFixed(2),diag:N.toFixed(2),len:I.toFixed(2),pass:C}}}function Jt(n){let t;return{c(){t=U("path"),this.h()},l(e){t=X(e,"path",{class:!0,d:!0}),O(t).forEach(l),this.h()},h(){o(t,"class","prev svelte-bxebgz"),o(t,"d",n[1])},m(e,a){F(e,t,a)},p(e,a){a&2&&o(t,"d",e[1])},d(e){e&&l(t)}}}function Vt(n){let t,e="I think you can do better!",a,r;return{c(){t=b("p"),t.textContent=e,this.h()},l(s){t=M(s,"P",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-140d4sa"&&(t.textContent=e),this.h()},h(){o(t,"class","fail svelte-bxebgz")},m(s,c){F(s,t,c),r=!0},i(s){r||(s&&te(()=>{r&&(a||(a=Nt(t,Dt,{},!0)),a.run(1))}),r=!0)},o(s){s&&(a||(a=Nt(t,Dt,{},!1)),a.run(0)),r=!1},d(s){s&&l(t),s&&a&&a.end()}}}function me(n){let t,e,a,r,s,c,m,u,f,h,_,i=JSON.stringify(n[5])+"",g,E,w,N,z=JSON.stringify(n[6])+"",I,L,C,q="target: similarity >= 0.9 && (diag <= 0.2 || len <= 0.5)",P,T,S,B="submit",R,H="reset",A,y,d,k,J,ct,G,at,ft,Et,D=n[1]&&Jt(n),j=n[4]===!1&&Vt();return{c(){t=b("div"),e=U("svg"),a=U("g"),D&&D.c(),r=U("path"),s=K(),c=b("p"),m=Q(n[0]),u=K(),j&&j.c(),f=K(),h=b("p"),_=Q("debug1: "),g=Q(i),E=K(),w=b("p"),N=Q("debug2: "),I=Q(z),L=K(),C=b("p"),C.textContent=q,P=K(),T=b("div"),S=b("button"),S.textContent=B,R=b("button"),R.textContent=H,A=K(),y=b("div"),d=U("svg"),k=U("g"),J=U("path"),ct=K(),G=b("p"),at=Q(n[3]),this.h()},l(v){t=M(v,"DIV",{class:!0});var x=O(t);e=X(x,"svg",{class:!0});var Tt=O(e);a=X(Tt,"g",{});var mt=O(a);D&&D.l(mt),r=X(mt,"path",{d:!0,class:!0}),O(r).forEach(l),mt.forEach(l),Tt.forEach(l),s=W(x),c=M(x,"P",{class:!0});var Ct=O(c);m=Z(Ct,n[0]),Ct.forEach(l),u=W(x),j&&j.l(x),x.forEach(l),f=W(v),h=M(v,"P",{style:!0});var ht=O(h);_=Z(ht,"debug1: "),g=Z(ht,i),ht.forEach(l),E=W(v),w=M(v,"P",{style:!0});var dt=O(w);N=Z(dt,"debug2: "),I=Z(dt,z),dt.forEach(l),L=W(v),C=M(v,"P",{style:!0,"data-svelte-h":!0}),Y(C)!=="svelte-12p92wp"&&(C.textContent=q),P=W(v),T=M(v,"DIV",{class:!0});var pt=O(T);S=M(pt,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(S)!=="svelte-13qkurs"&&(S.textContent=B),R=M(pt,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(R)!=="svelte-o81ggd"&&(R.textContent=H),pt.forEach(l),A=W(v),y=M(v,"DIV",{class:!0});var rt=O(y);d=X(rt,"svg",{class:!0});var Pt=O(d);k=X(Pt,"g",{});var At=O(k);J=X(At,"path",{d:!0,class:!0}),O(J).forEach(l),At.forEach(l),Pt.forEach(l),ct=W(rt),G=M(rt,"P",{class:!0});var zt=O(G);at=Z(zt,n[3]),zt.forEach(l),rt.forEach(l),this.h()},h(){o(r,"d",n[7]),o(r,"class","svelte-bxebgz"),o(e,"class","svelte-bxebgz"),o(c,"class","svelte-bxebgz"),o(t,"class","svelte-bxebgz"),St(t,"first",n[0]===0),V(h,"text-align","center"),V(h,"font-family","var(--mono)"),V(h,"font-size","12px"),V(w,"text-align","center"),V(w,"font-family","var(--mono)"),V(w,"font-size","12px"),V(C,"text-align","center"),V(C,"font-family","var(--mono)"),V(C,"font-size","12px"),o(S,"class","svelte-bxebgz"),o(R,"class","svelte-bxebgz"),o(T,"class","ui svelte-bxebgz"),o(J,"d",n[2]),o(J,"class","svelte-bxebgz"),o(d,"class","svelte-bxebgz"),o(G,"class","svelte-bxebgz"),o(y,"class","svelte-bxebgz")},m(v,x){F(v,t,x),p(t,e),p(e,a),D&&D.m(a,null),p(a,r),p(t,s),p(t,c),p(c,m),p(t,u),j&&j.m(t,null),F(v,f,x),F(v,h,x),p(h,_),p(h,g),F(v,E,x),F(v,w,x),p(w,N),p(w,I),F(v,L,x),F(v,C,x),F(v,P,x),F(v,T,x),p(T,S),p(T,R),F(v,A,x),F(v,y,x),p(y,d),p(d,k),p(k,J),p(y,ct),p(y,G),p(G,at),ft||(Et=[$(t,"pointerdown",n[8]),$(t,"pointermove",n[9]),$(t,"pointerup",n[10]),$(t,"pointerleave",n[10]),$(S,"click",n[11]),$(R,"click",n[12])],ft=!0)},p(v,[x]){v[1]?D?D.p(v,x):(D=Jt(v),D.c(),D.m(a,r)):D&&(D.d(1),D=null),x&128&&o(r,"d",v[7]),x&1&&ot(m,v[0]),v[4]===!1?j?x&16&&et(j,1):(j=Vt(),j.c(),et(j,1),j.m(t,null)):j&&(ae(),nt(j,1,1,()=>{j=null}),re()),x&1&&St(t,"first",v[0]===0),x&32&&i!==(i=JSON.stringify(v[5])+"")&&ot(g,i),x&64&&z!==(z=JSON.stringify(v[6])+"")&&ot(I,z),x&4&&o(J,"d",v[2]),x&8&&ot(at,v[3])},i(v){et(j)},o(v){nt(j)},d(v){v&&(l(t),l(f),l(h),l(E),l(w),l(L),l(C),l(P),l(T),l(A),l(y)),D&&D.d(),j&&j.d(),ft=!1,Zt(Et)}}}const Ut=300,he=12;function Xt(n){const t=+n.offsetX.toFixed(1),e=+n.offsetY.toFixed(1);return[t,e]}function de(n,t,e){let a,r;const s=Ut,c=[[[50,150],[250,150]],[[50,225],[150,75],[250,225],[50,225]],[[50,50],[250,50],[250,250],[50,250],[50,50]]];let m=!1,u=1,f=[],h="",_="",i="",g,E={},w={};function N(P){m=!0;const T=Xt(P);e(13,f[u]=[],f),f[u].push(T)}function z(P){if(!m)return;const T=Xt(P);f[u].push(T),e(13,f=[...f])}function I(){m=!1}function L(P=0){var T;if(e(3,i=P+1),i>u-1&&e(3,i=0),!((T=f[i])!=null&&T.length))setTimeout(L,1e3);else{const S=f[i].map(B=>B.join(" ")).join(" L ");e(2,_=`M ${S}`),setTimeout(()=>{L(i)},1e3/he)}}function C(){if(u>0){const P=[...f[u]].map(([R,H])=>({x:R,y:H})),T=[...f[u-1]].map(([R,H])=>({x:R,y:H})),S=Math.sqrt(Ut**2+s**2),B=fe({cur:P,prev:T,diagonal:S});e(4,g=B.valid),e(5,E=B.debug1),e(6,w=B.debug2),g?(e(1,h=r),e(0,u+=1)):setTimeout(()=>{e(4,g=void 0)},2e3),e(14,a=[])}}function q(){e(13,f[u]=[],f)}return $t(()=>{e(13,f=[c[2]]),e(1,h=`M ${f[0].map(P=>P.join(" ")).join(" L ")}`),L()}),n.$$.update=()=>{var P;n.$$.dirty&8193&&e(14,a=(P=f[u])==null?void 0:P.map(T=>T.join(" ")).join(" L ")),n.$$.dirty&16384&&e(7,r=a!=null&&a.length?`M ${a}`:"")},[u,h,_,i,g,E,w,r,N,z,I,C,q,f,a]}class pe extends lt{constructor(t){super(),ut(this,t,de,me,it,{})}}function ge(n){let t,e='This is the basically the <a target="_blank" rel="noreferrer" href="https://en.wikipedia.org/wiki/Chinese_whispers">telephone game</a>, but visual and massively collaborative.',a,r,s='Copy the <mark class="svelte-1v7ga7x">last person’s drawing</mark> as best you can.',c,m,u=`(since this is testing you just can keep submitting new ones to see a little
	animation develop)`,f,h,_;return h=new pe({}),{c(){t=b("p"),t.innerHTML=e,a=K(),r=b("p"),r.innerHTML=s,c=K(),m=b("p"),m.textContent=u,f=K(),vt(h.$$.fragment),this.h()},l(i){t=M(i,"P",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-i63m1y"&&(t.innerHTML=e),a=W(i),r=M(i,"P",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-tnmzjs"&&(r.innerHTML=s),c=W(i),m=M(i,"P",{class:!0,"data-svelte-h":!0}),Y(m)!=="svelte-1f9mmjs"&&(m.textContent=u),f=W(i),_t(h.$$.fragment,i),this.h()},h(){o(t,"class","svelte-1v7ga7x"),o(r,"class","svelte-1v7ga7x"),o(m,"class","svelte-1v7ga7x")},m(i,g){F(i,t,g),F(i,a,g),F(i,r,g),F(i,c,g),F(i,m,g),F(i,f,g),yt(h,i,g),_=!0},p:st,i(i){_||(et(h.$$.fragment,i),_=!0)},o(i){nt(h.$$.fragment,i),_=!1},d(i){i&&(l(t),l(a),l(r),l(c),l(m),l(f)),bt(h,i)}}}function ve(n){return Lt("copy"),Lt("data"),[]}class _e extends lt{constructor(t){super(),ut(this,t,ve,ge,it,{})}}const ye="Title TK",be="Description tk.",Yt={title:ye,description:be};function Me(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.13.0"),console.log("build: 2023-10-05-11:31"),console.log("--- --- --- --- --- ---")}function we(n){let t,e,a,r;return t=new ie({props:{title:n[1],description:n[2],url:n[3],preloadFont:n[0],keywords:n[4]}}),a=new _e({}),{c(){vt(t.$$.fragment),e=K(),vt(a.$$.fragment)},l(s){_t(t.$$.fragment,s),e=W(s),_t(a.$$.fragment,s)},m(s,c){yt(t,s,c),F(s,e,c),yt(a,s,c),r=!0},p:st,i(s){r||(et(t.$$.fragment,s),et(a.$$.fragment,s),r=!0)},o(s){nt(t.$$.fragment,s),nt(a.$$.fragment,s),r=!1},d(s){s&&l(e),bt(t,s),bt(a,s)}}}function xe(n,t,e){let{data:a}=t;Me();const r=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:s,description:c,url:m,keywords:u}=Yt;return Ft("copy",Yt),Ft("data",a.data),n.$$set=f=>{"data"in f&&e(5,a=f.data)},[r,s,c,m,u,a]}class Ce extends lt{constructor(t){super(),ut(this,t,xe,we,it,{data:5})}}export{Ce as component};
