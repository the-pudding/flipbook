import{s as ue,R as Re,e as W,S as Y,j as S,c as R,a as M,T as K,d as F,l as A,m as E,v as Te,U as pe,i as q,f as k,V as z,W as Oe,X as Ne,Y as Se,C as Le,Z as Ae,o as je,t as B,b as H,g as J,E as Ue,n as Fe,w as Ce,_ as qe,$ as Ge,a0 as Ve,a1 as ve,k as ne,a2 as ge}from"../chunks/scheduler.BIFECd0c.js";import{S as he,i as ce,a as Z,t as te,f as ze,h as Be,b as ie,d as oe,m as ae,e as le}from"../chunks/index.C3gPqRKU.js";import{M as He,c as fe}from"../chunks/copy.CvYQVaru.js";import{l as Xe,f as Ye,v as Ke,g as Ze}from"../chunks/validateLine.NbEnA8Ii.js";import{v as Je}from"../chunks/version.8vTIxrph.js";const Qe=a=>({}),_e=a=>({});function we(a){let t;return{c(){t=Y("path"),this.h()},l(e){t=K(e,"path",{class:!0,d:!0}),M(t).forEach(F),this.h()},h(){E(t,"class","prev svelte-yl04eo"),E(t,"d",a[4])},m(e,u){q(e,t,u)},p(e,u){u[0]&16&&E(t,"d",e[4])},d(e){e&&F(t)}}}function be(a){let t,e=a[2]+1+"",u;return{c(){t=W("p"),u=B(e),this.h()},l(g){t=R(g,"P",{class:!0});var r=M(t);u=H(r,e),r.forEach(F),this.h()},h(){E(t,"class","frame svelte-yl04eo")},m(g,r){q(g,t,r),k(t,u)},p(g,r){r[0]&4&&e!==(e=g[2]+1+"")&&J(u,e)},d(g){g&&F(t)}}}function ke(a){let t,e,u,g;return{c(){t=W("p"),e=W("small"),u=B(a[7]),this.h()},l(r){t=R(r,"P",{class:!0});var f=M(t);e=R(f,"SMALL",{});var b=M(e);u=H(b,a[7]),b.forEach(F),f.forEach(F),this.h()},h(){E(t,"class","message svelte-yl04eo")},m(r,f){q(r,t,f),k(t,e),k(e,u)},p(r,f){f[0]&128&&J(u,r[7])},i(r){r&&(g||Ue(()=>{g=ze(t,Ye,{}),g.start()}))},o:Fe,d(r){r&&F(t)}}}function $e(a){let t,e,u,g,r,f,b,v,p,l,h,n,_,y,w,s=a[4]&&!a[6]&&we(a),i=a[1]&&be(a),o=a[7]&&ke(a);const c=a[25].ui,d=Re(c,a,a[24],_e);return{c(){t=W("div"),e=W("div"),u=Y("svg"),g=Y("g"),r=Y("path"),f=S(),b=Y("svg"),v=Y("g"),s&&s.c(),p=Y("path"),l=S(),i&&i.c(),h=S(),o&&o.c(),n=S(),d&&d.c(),this.h()},l(m){t=R(m,"DIV",{class:!0});var C=M(t);e=R(C,"DIV",{class:!0,style:!0});var D=M(e);u=K(D,"svg",{class:!0});var T=M(u);g=K(T,"g",{});var I=M(g);r=K(I,"path",{d:!0,class:!0}),M(r).forEach(F),I.forEach(F),T.forEach(F),f=A(D),b=K(D,"svg",{class:!0,"aria-label":!0});var P=M(b);v=K(P,"g",{});var x=M(v);s&&s.l(x),p=K(x,"path",{d:!0,class:!0}),M(p).forEach(F),x.forEach(F),P.forEach(F),l=A(D),i&&i.l(D),h=A(D),o&&o.l(D),D.forEach(F),C.forEach(F),n=A(m),d&&d.l(m),this.h()},h(){E(r,"d",a[5]),E(r,"class","svelte-yl04eo"),E(u,"class","preview svelte-yl04eo"),E(p,"d",a[3]),E(p,"class","svelte-yl04eo"),E(b,"class","draw shadow svelte-yl04eo"),E(b,"aria-label","a drawing canvas to trace an image drawn by a previous user"),E(e,"class","canvas svelte-yl04eo"),Te(e,"--stroke-width",xe),E(t,"class","c svelte-yl04eo"),pe(t,"disabled",a[0])},m(m,C){q(m,t,C),k(t,e),k(e,u),k(u,g),k(g,r),k(e,f),k(e,b),k(b,v),s&&s.m(v,null),k(v,p),k(e,l),i&&i.m(e,null),k(e,h),o&&o.m(e,null),q(m,n,C),d&&d.m(m,C),_=!0,y||(w=[z(t,"pointerdown",a[8]),z(t,"pointermove",a[9]),z(t,"pointerup",a[10]),z(t,"pointerleave",a[10])],y=!0)},p(m,C){(!_||C[0]&32)&&E(r,"d",m[5]),m[4]&&!m[6]?s?s.p(m,C):(s=we(m),s.c(),s.m(v,p)):s&&(s.d(1),s=null),(!_||C[0]&8)&&E(p,"d",m[3]),m[1]?i?i.p(m,C):(i=be(m),i.c(),i.m(e,h)):i&&(i.d(1),i=null),m[7]?o?(o.p(m,C),C[0]&128&&Z(o,1)):(o=ke(m),o.c(),Z(o,1),o.m(e,null)):o&&(o.d(1),o=null),(!_||C[0]&1)&&pe(t,"disabled",m[0]),d&&d.p&&(!_||C[0]&16777216)&&Oe(d,c,m,m[24],_?Se(c,m[24],C,Qe):Ne(m[24]),_e)},i(m){_||(Z(o),Z(d,m),_=!0)},o(m){te(d,m),_=!1},d(m){m&&(F(t),F(n)),s&&s.d(),i&&i.d(),o&&o.d(),d&&d.d(m),y=!1,Le(w)}}}const xe=4,$=320,et=8;function tt(a){let t=[];for(let e of a)t.push(...e);return t}function ye(a){const t=+a.offsetX.toFixed(1),e=+a.offsetY.toFixed(1);return[t,e]}function st(a,t,e){let u,g,{$$slots:r={},$$scope:f}=t,{preset:b}=t,{path:v}=t,{paths:p}=t,{disabled:l}=t,{showFrameIndex:h}=t,{inkRem:n=1}=t;const _=$,y=$*5,w=Ae(),s=!!b;let i=!1,o=!1,c=0,d=[],m="",C="",D=!0,T;const I=We,P=Ie,x=Me,O=de,G=X;function U(L){e(7,X=null),e(20,i=!1),e(13,n=1),o=!0;const j=ye(L);e(21,d[c]=[],d),d[c].push(j)}function V(L){if(!o||i)return;const j=ye(L);d[c].push(j);const N=Xe(d[c]);N>y&&e(20,i=!0),e(13,n=Math.max(0,(y-N)/y)),e(21,d=[...d])}function Q(){o=!1}function De(){if(!d[c]){e(7,X="Draw something first!"),w("validate",!1),setTimeout(()=>{e(7,X=null)},2e3);return}if(s&&c>0){const L=[...d[c]].map(([se,re])=>({x:se,y:re})),j=[...d[c-1]].map(([se,re])=>({x:se,y:re})),N=Math.sqrt($**2+_**2);e(22,D=Ke({cur:L,prev:j,diagonal:N,canvasSize:$,strokeWidth:xe})),w("validate",D)}else e(22,D=!0);D?(e(4,m=g),e(2,c+=1)):setTimeout(()=>{e(22,D=void 0)},2e3),e(23,u=[]),e(13,n=1)}function de(){e(21,d[c]=[],d),e(5,C=""),e(13,n=1),e(22,D=!0)}function me(L=0){const j=d[L].map(N=>N.join(" ")).join("L");e(5,C=T?`M${j}`:""),setTimeout(()=>{let N=L+1;N>c-1&&(N=0),T&&me(N)},1e3/et)}function Ie(){De()}function Me(){de()}function X(L){e(7,X=L)}function We(){e(6,T=!T),T?me():e(5,C="")}return je(()=>{e(4,m=b||""),m&&(e(2,c=1),e(21,d[0]=tt(m.split("M").filter(L=>L).map(L=>L.split("L").map(j=>j.split(" ").map(N=>+N)))),d))}),a.$$set=L=>{"preset"in L&&e(14,b=L.preset),"path"in L&&e(11,v=L.path),"paths"in L&&e(12,p=L.paths),"disabled"in L&&e(0,l=L.disabled),"showFrameIndex"in L&&e(1,h=L.showFrameIndex),"inkRem"in L&&e(13,n=L.inkRem),"$$scope"in L&&e(24,f=L.$$scope)},a.$$.update=()=>{var L;a.$$.dirty[0]&2097156&&e(23,u=(L=d[c])==null?void 0:L.map(j=>j.join(" ")).join("L")),a.$$.dirty[0]&8388608&&e(3,g=u!=null&&u.length?`M${u}`:""),a.$$.dirty[0]&2097152&&e(12,p=d.map(j=>`M${j.map(N=>N.join(" ")).join("L")}`)),a.$$.dirty[0]&8&&e(11,v=g),a.$$.dirty[0]&5242880&&e(7,X=D===!1?"I think you can do better!":i?"Out of ink":null)},[l,h,c,g,m,C,T,X,U,V,Q,v,p,n,b,I,P,x,O,G,i,d,D,u,f,r]}class rt extends he{constructor(t){super(),ce(this,t,st,$e,ue,{preset:14,path:11,paths:12,disabled:0,showFrameIndex:1,inkRem:13,preview:15,addFrame:16,clearFrame:17,resetFrame:18,addMessage:19},null,[-1,-1])}get preview(){return this.$$.ctx[15]}get addFrame(){return this.$$.ctx[16]}get clearFrame(){return this.$$.ctx[17]}get resetFrame(){return this.$$.ctx[18]}get addMessage(){return this.$$.ctx[19]}}function ee(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pe={exports:{}};(function(a,t){(function(e){a.exports=e()})(function(){return function e(u,g,r){function f(p,l){if(!g[p]){if(!u[p]){var h=typeof ee=="function"&&ee;if(!l&&h)return h(p,!0);if(b)return b(p,!0);var n=new Error("Cannot find module '"+p+"'");throw n.code="MODULE_NOT_FOUND",n}var _=g[p]={exports:{}};u[p][0].call(_.exports,function(y){var w=u[p][1][y];return f(w||y)},_,_.exports,e,u,g,r)}return g[p].exports}for(var b=typeof ee=="function"&&ee,v=0;v<r.length;v++)f(r[v]);return f}({1:[function(e,u,g){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}u.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(l){if(!b(l)||l<0||isNaN(l))throw TypeError("n must be a positive number");return this._maxListeners=l,this},r.prototype.emit=function(l){var h,n,_,y,w,s;if(this._events||(this._events={}),l==="error"&&(!this._events.error||v(this._events.error)&&!this._events.error.length)){if(h=arguments[1],h instanceof Error)throw h;var i=new Error('Uncaught, unspecified "error" event. ('+h+")");throw i.context=h,i}if(n=this._events[l],p(n))return!1;if(f(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:y=Array.prototype.slice.call(arguments,1),n.apply(this,y)}else if(v(n))for(y=Array.prototype.slice.call(arguments,1),s=n.slice(),_=s.length,w=0;w<_;w++)s[w].apply(this,y);return!0},r.prototype.addListener=function(l,h){var n;if(!f(h))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",l,f(h.listener)?h.listener:h),this._events[l]?v(this._events[l])?this._events[l].push(h):this._events[l]=[this._events[l],h]:this._events[l]=h,v(this._events[l])&&!this._events[l].warned&&(p(this._maxListeners)?n=r.defaultMaxListeners:n=this._maxListeners,n&&n>0&&this._events[l].length>n&&(this._events[l].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[l].length),typeof console.trace=="function"&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(l,h){if(!f(h))throw TypeError("listener must be a function");var n=!1;function _(){this.removeListener(l,_),n||(n=!0,h.apply(this,arguments))}return _.listener=h,this.on(l,_),this},r.prototype.removeListener=function(l,h){var n,_,y,w;if(!f(h))throw TypeError("listener must be a function");if(!this._events||!this._events[l])return this;if(n=this._events[l],y=n.length,_=-1,n===h||f(n.listener)&&n.listener===h)delete this._events[l],this._events.removeListener&&this.emit("removeListener",l,h);else if(v(n)){for(w=y;w-- >0;)if(n[w]===h||n[w].listener&&n[w].listener===h){_=w;break}if(_<0)return this;n.length===1?(n.length=0,delete this._events[l]):n.splice(_,1),this._events.removeListener&&this.emit("removeListener",l,h)}return this},r.prototype.removeAllListeners=function(l){var h,n;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[l]&&delete this._events[l],this;if(arguments.length===0){for(h in this._events)h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[l],f(n))this.removeListener(l,n);else if(n)for(;n.length;)this.removeListener(l,n[n.length-1]);return delete this._events[l],this},r.prototype.listeners=function(l){var h;return!this._events||!this._events[l]?h=[]:f(this._events[l])?h=[this._events[l]]:h=this._events[l].slice(),h},r.prototype.listenerCount=function(l){if(this._events){var h=this._events[l];if(f(h))return 1;if(h)return h.length}return 0},r.listenerCount=function(l,h){return l.listenerCount(h)};function f(l){return typeof l=="function"}function b(l){return typeof l=="number"}function v(l){return typeof l=="object"&&l!==null}function p(l){return l===void 0}},{}],2:[function(e,u,g){var r,f,b,v,p;p=navigator.userAgent.toLowerCase(),v=navigator.platform.toLowerCase(),r=p.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],b=r[1]==="ie"&&document.documentMode,f={name:r[1]==="version"?r[3]:r[1],version:b||parseFloat(r[1]==="opera"&&r[4]?r[4]:r[2]),platform:{name:p.match(/ip(?:ad|od|hone)/)?"ios":(p.match(/(?:webos|android)/)||v.match(/mac|win|linux/)||["other"])[0]}},f[f.name]=!0,f[f.name+parseInt(f.version,10)]=!0,f.platform[f.platform.name]=!0,u.exports=f},{}],3:[function(e,u,g){var r,f,b,v=function(n,_){for(var y in _)p.call(_,y)&&(n[y]=_[y]);function w(){this.constructor=n}return w.prototype=_.prototype,n.prototype=new w,n.__super__=_.prototype,n},p={}.hasOwnProperty,l=[].indexOf||function(n){for(var _=0,y=this.length;_<y;_++)if(_ in this&&this[_]===n)return _;return-1},h=[].slice;r=e("events").EventEmitter,b=e("./browser.coffee"),f=function(n){var _,y;v(w,n),_={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},y={delay:500,copy:!1};function w(s){var i,o,c;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(s);for(o in _)c=_[o],(i=this.options)[o]==null&&(i[o]=c)}return w.prototype.setOption=function(s,i){if(this.options[s]=i,this._canvas!=null&&(s==="width"||s==="height"))return this._canvas[s]=i},w.prototype.setOptions=function(s){var i,o,c;o=[];for(i in s)p.call(s,i)&&(c=s[i],o.push(this.setOption(i,c)));return o},w.prototype.addFrame=function(s,i){var o,c;i==null&&(i={}),o={},o.transparent=this.options.transparent;for(c in y)o[c]=i[c]||y[c];if(this.options.width==null&&this.setOption("width",s.width),this.options.height==null&&this.setOption("height",s.height),typeof ImageData<"u"&&ImageData!==null&&s instanceof ImageData)o.data=s.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&s instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&s instanceof WebGLRenderingContext)i.copy?o.data=this.getContextData(s):o.context=s;else if(s.childNodes!=null)i.copy?o.data=this.getImageData(s):o.image=s;else throw new Error("Invalid image");return this.frames.push(o)},w.prototype.render=function(){var s,i,o;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var c,d,m;for(m=[],c=0,d=this.frames.length;0<=d?c<d:c>d;0<=d?++c:--c)m.push(null);return m}).call(this),i=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(s=0,o=i;0<=o?s<o:s>o;0<=o?++s:--s)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},w.prototype.abort=function(){for(var s;s=this.activeWorkers.shift(),s!=null;)this.log("killing active worker"),s.terminate();return this.running=!1,this.emit("abort")},w.prototype.spawnWorkers=function(){var s,i,o;return s=Math.min(this.options.workers,this.frames.length),(function(){o=[];for(var c=i=this.freeWorkers.length;i<=s?c<s:c>s;i<=s?c++:c--)o.push(c);return o}).apply(this).forEach(function(c){return function(d){var m;return c.log("spawning worker "+d),m=new Worker(c.options.workerScript),m.onmessage=function(C){return c.activeWorkers.splice(c.activeWorkers.indexOf(m),1),c.freeWorkers.push(m),c.frameFinished(C.data)},c.freeWorkers.push(m)}}(this)),s},w.prototype.frameFinished=function(s){var i,o;if(this.log("frame "+s.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[s.index]=s,this.options.globalPalette===!0&&(this.options.globalPalette=s.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(i=1,o=this.freeWorkers.length;1<=o?i<o:i>o;1<=o?++i:--i)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},w.prototype.finishRendering=function(){var s,i,o,c,d,m,C,D,T,I,P,x,O,G,U,V;for(D=0,G=this.imageParts,d=0,T=G.length;d<T;d++)i=G[d],D+=(i.data.length-1)*i.pageSize+i.cursor;for(D+=i.pageSize-i.cursor,this.log("rendering finished - filesize "+Math.round(D/1e3)+"kb"),s=new Uint8Array(D),x=0,U=this.imageParts,m=0,I=U.length;m<I;m++)for(i=U[m],V=i.data,o=C=0,P=V.length;C<P;o=++C)O=V[o],s.set(O,x),o===i.data.length-1?x+=i.cursor:x+=i.pageSize;return c=new Blob([s],{type:"image/gif"}),this.emit("finished",c,s)},w.prototype.renderNextFrame=function(){var s,i,o;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return s=this.frames[this.nextFrame++],o=this.freeWorkers.shift(),i=this.getTask(s),this.log("starting frame "+(i.index+1)+" of "+this.frames.length),this.activeWorkers.push(o),o.postMessage(i)},w.prototype.getContextData=function(s){return s.getImageData(0,0,this.options.width,this.options.height).data},w.prototype.getImageData=function(s){var i;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),i=this._canvas.getContext("2d"),i.setFill=this.options.background,i.fillRect(0,0,this.options.width,this.options.height),i.drawImage(s,0,0),this.getContextData(i)},w.prototype.getTask=function(s){var i,o;if(i=this.frames.indexOf(s),o={index:i,last:i===this.frames.length-1,delay:s.delay,transparent:s.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:b.name==="chrome"},s.data!=null)o.data=s.data;else if(s.context!=null)o.data=this.getContextData(s.context);else if(s.image!=null)o.data=this.getImageData(s.image);else throw new Error("Invalid frame");return o},w.prototype.log=function(){var s;if(s=1<=arguments.length?h.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,s)},w}(r),u.exports=f},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(Pe);var nt=Pe.exports;const it=Ze(nt);async function ot(a,t){const e=new Path2D(t);a.strokeStyle="#000",a.lineWidth=4,a.lineCap="round",a.stroke(e)}async function at({frames:a,width:t,height:e,fps:u}){return new Promise(async(g,r)=>{const f=Math.floor(1e3/u),b=navigator.hardwareConcurrency||4,v=Math.max(2,b/2),p=new it({workers:v,workerScript:"../assets/gif.worker.js",quality:1,width:t,height:e}),l=document.createElement("canvas"),h=l.getContext("2d");l.width=t,l.height=e;for(const n of a)h.clearRect(0,0,t,e),h.fillStyle="#fff",h.fillRect(0,0,t,e),await ot(h,n),p.addFrame(h,{copy:!0,delay:f});p.on("finished",n=>{g(URL.createObjectURL(n))}),p.on("error",()=>{console.log(error),r("Error rendering gif")}),p.render()})}function lt(a){let t,e,u="Frames:",g,r,f,b="Add",v,p,l="Clear",h,n,_=a[6]?"Stop":"Play",y,w,s,i;return{c(){t=W("div"),e=W("p"),e.textContent=u,g=S(),r=W("div"),f=W("button"),f.textContent=b,v=S(),p=W("button"),p.textContent=l,h=S(),n=W("button"),y=B(_),w=B(" Preview"),this.h()},l(o){t=R(o,"DIV",{class:!0,slot:!0});var c=M(t);e=R(c,"P",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1kove1c"&&(e.textContent=u),g=A(c),r=R(c,"DIV",{class:!0});var d=M(r);f=R(d,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(f)!=="svelte-u2k0bg"&&(f.textContent=b),v=A(d),p=R(d,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(p)!=="svelte-vb2at4"&&(p.textContent=l),h=A(d),n=R(d,"BUTTON",{class:!0});var m=M(n);y=H(m,_),w=H(m," Preview"),m.forEach(F),d.forEach(F),c.forEach(F),this.h()},h(){E(e,"class","svelte-2vvmeo"),E(f,"class","small svelte-2vvmeo"),E(p,"class","small svelte-2vvmeo"),E(n,"class","small svelte-2vvmeo"),E(r,"class","buttons svelte-2vvmeo"),E(t,"class","ui svelte-2vvmeo"),E(t,"slot","ui")},m(o,c){q(o,t,c),k(t,e),k(t,g),k(t,r),k(r,f),k(r,v),k(r,p),k(r,h),k(r,n),k(n,y),k(n,w),s||(i=[z(f,"click",a[7]),z(p,"click",a[8]),z(n,"click",a[9])],s=!0)},p(o,c){c&64&&_!==(_=o[6]?"Stop":"Play")&&J(y,_)},d(o){o&&F(t),s=!1,Le(i)}}}function Ee(a){let t,e,u,g,r,f;return{c(){t=W("div"),e=W("a"),u=B("Download"),g=S(),r=W("img"),this.h()},l(b){t=R(b,"DIV",{class:!0});var v=M(t);e=R(v,"A",{role:!0,href:!0,download:!0});var p=M(e);u=H(p,"Download"),p.forEach(F),g=A(v),r=R(v,"IMG",{src:!0,alt:!0}),v.forEach(F),this.h()},h(){E(e,"role","button"),E(e,"href",a[4]),E(e,"download","animation.gif"),ve(r.src,f=a[4])||E(r,"src",f),E(r,"alt","animation"),E(t,"class","share svelte-2vvmeo")},m(b,v){q(b,t,v),k(t,e),k(e,u),k(t,g),k(t,r)},p(b,v){v&16&&E(e,"href",b[4]),v&16&&!ve(r.src,f=b[4])&&E(r,"src",f)},d(b){b&&F(t)}}}function ft(a){let t,e,u,g,r,f,b,v,p,l,h,n,_,y,w,s,i=a[5]?"Rendering":"Share",o,c,d,m,C;function D(P){a[12](P)}let T={showFrameIndex:!0,$$slots:{ui:[lt]},$$scope:{ctx:a}};a[3]!==void 0&&(T.paths=a[3]),n=new rt({props:T}),a[11](n),Ce.push(()=>Be(n,"paths",D));let I=a[4]&&Ee(a);return{c(){t=W("section"),e=W("p"),u=new qe(!1),g=S(),r=W("br"),f=S(),b=W("small"),v=W("em"),p=B("Note: "),l=B(a[1]),h=S(),ie(n.$$.fragment),y=S(),w=W("div"),s=W("button"),o=B(i),c=S(),I&&I.c(),this.h()},l(P){t=R(P,"SECTION",{id:!0,class:!0});var x=M(t);e=R(x,"P",{class:!0});var O=M(e);u=Ge(O,!1),g=A(O),r=R(O,"BR",{}),f=A(O),b=R(O,"SMALL",{});var G=M(b);v=R(G,"EM",{});var U=M(v);p=H(U,"Note: "),l=H(U,a[1]),U.forEach(F),G.forEach(F),O.forEach(F),h=A(x),oe(n.$$.fragment,x),y=A(x),w=R(x,"DIV",{class:!0});var V=M(w);s=R(V,"BUTTON",{class:!0});var Q=M(s);o=H(Q,i),Q.forEach(F),V.forEach(F),c=A(x),I&&I.l(x),x.forEach(F),this.h()},h(){u.a=g,E(e,"class","svelte-2vvmeo"),s.disabled=a[5],E(s,"class","svelte-2vvmeo"),E(w,"class","render svelte-2vvmeo"),E(t,"id","playground"),E(t,"class","svelte-2vvmeo")},m(P,x){q(P,t,x),k(t,e),u.m(a[0],e),k(e,g),k(e,r),k(e,f),k(e,b),k(b,v),k(v,p),k(v,l),k(t,h),ae(n,t,null),k(t,y),k(t,w),k(w,s),k(s,o),k(t,c),I&&I.m(t,null),d=!0,m||(C=z(s,"click",a[10]),m=!0)},p(P,[x]){(!d||x&1)&&u.p(P[0]),(!d||x&2)&&J(l,P[1]);const O={};x&8256&&(O.$$scope={dirty:x,ctx:P}),!_&&x&8&&(_=!0,O.paths=P[3],Ve(()=>_=!1)),n.$set(O),(!d||x&32)&&i!==(i=P[5]?"Rendering":"Share")&&J(o,i),(!d||x&32)&&(s.disabled=P[5]),P[4]?I?I.p(P,x):(I=Ee(P),I.c(),I.m(t,null)):I&&(I.d(1),I=null)},i(P){d||(Z(n.$$.fragment,P),d=!0)},o(P){te(n.$$.fragment,P),d=!1},d(P){P&&F(t),a[11](null),le(n),I&&I.d(),m=!1,C()}}}function ut(a,t,e){let{text:u="Make an animation!"}=t,{note:g}=t,r,f,b,v,p;function l(){r.addFrame()}function h(){r.clearFrame()}function n(){r.preview(),e(6,p=!p)}async function _(){e(5,v=!0),e(4,b=await at({frames:f,width:320,height:320,fps:12})),e(5,v=!1)}function y(s){Ce[s?"unshift":"push"](()=>{r=s,e(2,r)})}function w(s){f=s,e(3,f)}return a.$$set=s=>{"text"in s&&e(0,u=s.text),"note"in s&&e(1,g=s.note)},[u,g,r,f,b,v,p,l,h,n,_,y,w]}class ht extends he{constructor(t){super(),ce(this,t,ut,ft,ue,{text:0,note:1})}}function ct(a){let t,e,u,g;return t=new He({props:{title:a[0],description:a[1],url:a[2],keywords:a[3]}}),u=new ht({props:{note:fe.playgroundNote}}),{c(){ie(t.$$.fragment),e=S(),ie(u.$$.fragment)},l(r){oe(t.$$.fragment,r),e=A(r),oe(u.$$.fragment,r)},m(r,f){ae(t,r,f),q(r,e,f),ae(u,r,f),g=!0},p:Fe,i(r){g||(Z(t.$$.fragment,r),Z(u.$$.fragment,r),g=!0)},o(r){te(t.$$.fragment,r),te(u.$$.fragment,r),g=!1},d(r){r&&F(e),le(t,r),le(u,r)}}}function dt(a,t,e){let{data:u}=t;Je();const{title:g,description:r,url:f,keywords:b}=fe;return ge("copy",fe),ge("data",u.data),a.$$set=v=>{"data"in v&&e(4,u=v.data)},[g,r,f,b,u]}class wt extends he{constructor(t){super(),ce(this,t,dt,ct,ue,{data:4})}}export{wt as component};
