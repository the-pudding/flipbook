import{s as re,p as se,f as P,H as le,a as O,l as q,g as D,h as I,v as fe,c as N,m as A,d as W,j as E,i as G,w as b,y as j,n as V,O as he,V as ee,x as z,G as ue,r as ce,Q as te}from"../chunks/scheduler.1b8758cb.js";import{S as ie,i as oe,f as de,b as H,d as Q,m as J,a as K,t as X,e as Y}from"../chunks/index.1f7cc648.js";import{M as ve,c as Z}from"../chunks/copy.cddd5e38.js";import{a as pe,C as me,v as ge}from"../chunks/version.08d7136c.js";function $(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ae={exports:{}};(function(d,o){(function(l){d.exports=l()})(function(){return function l(m,w,t){function f(c,n){if(!w[c]){if(!m[c]){var i=typeof $=="function"&&$;if(!n&&i)return i(c,!0);if(g)return g(c,!0);var r=new Error("Cannot find module '"+c+"'");throw r.code="MODULE_NOT_FOUND",r}var p=w[c]={exports:{}};m[c][0].call(p.exports,function(_){var u=m[c][1][_];return f(u||_)},p,p.exports,l,m,w,t)}return w[c].exports}for(var g=typeof $=="function"&&$,v=0;v<t.length;v++)f(t[v]);return f}({1:[function(l,m,w){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}m.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(n){if(!g(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},t.prototype.emit=function(n){var i,r,p,_,u,e;if(this._events||(this._events={}),n==="error"&&(!this._events.error||v(this._events.error)&&!this._events.error.length)){if(i=arguments[1],i instanceof Error)throw i;var s=new Error('Uncaught, unspecified "error" event. ('+i+")");throw s.context=i,s}if(r=this._events[n],c(r))return!1;if(f(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:_=Array.prototype.slice.call(arguments,1),r.apply(this,_)}else if(v(r))for(_=Array.prototype.slice.call(arguments,1),e=r.slice(),p=e.length,u=0;u<p;u++)e[u].apply(this,_);return!0},t.prototype.addListener=function(n,i){var r;if(!f(i))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,f(i.listener)?i.listener:i),this._events[n]?v(this._events[n])?this._events[n].push(i):this._events[n]=[this._events[n],i]:this._events[n]=i,v(this._events[n])&&!this._events[n].warned&&(c(this._maxListeners)?r=t.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[n].length>r&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(n,i){if(!f(i))throw TypeError("listener must be a function");var r=!1;function p(){this.removeListener(n,p),r||(r=!0,i.apply(this,arguments))}return p.listener=i,this.on(n,p),this},t.prototype.removeListener=function(n,i){var r,p,_,u;if(!f(i))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(r=this._events[n],_=r.length,p=-1,r===i||f(r.listener)&&r.listener===i)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,i);else if(v(r)){for(u=_;u-- >0;)if(r[u]===i||r[u].listener&&r[u].listener===i){p=u;break}if(p<0)return this;r.length===1?(r.length=0,delete this._events[n]):r.splice(p,1),this._events.removeListener&&this.emit("removeListener",n,i)}return this},t.prototype.removeAllListeners=function(n){var i,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(i in this._events)i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[n],f(r))this.removeListener(n,r);else if(r)for(;r.length;)this.removeListener(n,r[r.length-1]);return delete this._events[n],this},t.prototype.listeners=function(n){var i;return!this._events||!this._events[n]?i=[]:f(this._events[n])?i=[this._events[n]]:i=this._events[n].slice(),i},t.prototype.listenerCount=function(n){if(this._events){var i=this._events[n];if(f(i))return 1;if(i)return i.length}return 0},t.listenerCount=function(n,i){return n.listenerCount(i)};function f(n){return typeof n=="function"}function g(n){return typeof n=="number"}function v(n){return typeof n=="object"&&n!==null}function c(n){return n===void 0}},{}],2:[function(l,m,w){var t,f,g,v,c;c=navigator.userAgent.toLowerCase(),v=navigator.platform.toLowerCase(),t=c.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],g=t[1]==="ie"&&document.documentMode,f={name:t[1]==="version"?t[3]:t[1],version:g||parseFloat(t[1]==="opera"&&t[4]?t[4]:t[2]),platform:{name:c.match(/ip(?:ad|od|hone)/)?"ios":(c.match(/(?:webos|android)/)||v.match(/mac|win|linux/)||["other"])[0]}},f[f.name]=!0,f[f.name+parseInt(f.version,10)]=!0,f.platform[f.platform.name]=!0,m.exports=f},{}],3:[function(l,m,w){var t,f,g,v=function(r,p){for(var _ in p)c.call(p,_)&&(r[_]=p[_]);function u(){this.constructor=r}return u.prototype=p.prototype,r.prototype=new u,r.__super__=p.prototype,r},c={}.hasOwnProperty,n=[].indexOf||function(r){for(var p=0,_=this.length;p<_;p++)if(p in this&&this[p]===r)return p;return-1},i=[].slice;t=l("events").EventEmitter,g=l("./browser.coffee"),f=function(r){var p,_;v(u,r),p={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},_={delay:500,copy:!1};function u(e){var s,a,h;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e);for(a in p)h=p[a],(s=this.options)[a]==null&&(s[a]=h)}return u.prototype.setOption=function(e,s){if(this.options[e]=s,this._canvas!=null&&(e==="width"||e==="height"))return this._canvas[e]=s},u.prototype.setOptions=function(e){var s,a,h;a=[];for(s in e)c.call(e,s)&&(h=e[s],a.push(this.setOption(s,h)));return a},u.prototype.addFrame=function(e,s){var a,h;s==null&&(s={}),a={},a.transparent=this.options.transparent;for(h in _)a[h]=s[h]||_[h];if(this.options.width==null&&this.setOption("width",e.width),this.options.height==null&&this.setOption("height",e.height),typeof ImageData<"u"&&ImageData!==null&&e instanceof ImageData)a.data=e.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&e instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&e instanceof WebGLRenderingContext)s.copy?a.data=this.getContextData(e):a.context=e;else if(e.childNodes!=null)s.copy?a.data=this.getImageData(e):a.image=e;else throw new Error("Invalid image");return this.frames.push(a)},u.prototype.render=function(){var e,s,a;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var h,k,C;for(C=[],h=0,k=this.frames.length;0<=k?h<k:h>k;0<=k?++h:--h)C.push(null);return C}).call(this),s=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(e=0,a=s;0<=a?e<a:e>a;0<=a?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},u.prototype.abort=function(){for(var e;e=this.activeWorkers.shift(),e!=null;)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},u.prototype.spawnWorkers=function(){var e,s,a;return e=Math.min(this.options.workers,this.frames.length),(function(){a=[];for(var h=s=this.freeWorkers.length;s<=e?h<e:h>e;s<=e?h++:h--)a.push(h);return a}).apply(this).forEach(function(h){return function(k){var C;return h.log("spawning worker "+k),C=new Worker(h.options.workerScript),C.onmessage=function(T){return h.activeWorkers.splice(h.activeWorkers.indexOf(C),1),h.freeWorkers.push(C),h.frameFinished(T.data)},h.freeWorkers.push(C)}}(this)),e},u.prototype.frameFinished=function(e){var s,a;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,this.options.globalPalette===!0&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(s=1,a=this.freeWorkers.length;1<=a?s<a:s>a;1<=a?++s:--s)this.renderNextFrame();return n.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},u.prototype.finishRendering=function(){var e,s,a,h,k,C,T,R,L,y,x,F,M,S,U,B;for(R=0,S=this.imageParts,k=0,L=S.length;k<L;k++)s=S[k],R+=(s.data.length-1)*s.pageSize+s.cursor;for(R+=s.pageSize-s.cursor,this.log("rendering finished - filesize "+Math.round(R/1e3)+"kb"),e=new Uint8Array(R),F=0,U=this.imageParts,C=0,y=U.length;C<y;C++)for(s=U[C],B=s.data,a=T=0,x=B.length;T<x;a=++T)M=B[a],e.set(M,F),a===s.data.length-1?F+=s.cursor:F+=s.pageSize;return h=new Blob([e],{type:"image/gif"}),this.emit("finished",h,e)},u.prototype.renderNextFrame=function(){var e,s,a;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],a=this.freeWorkers.shift(),s=this.getTask(e),this.log("starting frame "+(s.index+1)+" of "+this.frames.length),this.activeWorkers.push(a),a.postMessage(s)},u.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},u.prototype.getImageData=function(e){var s;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),s=this._canvas.getContext("2d"),s.setFill=this.options.background,s.fillRect(0,0,this.options.width,this.options.height),s.drawImage(e,0,0),this.getContextData(s)},u.prototype.getTask=function(e){var s,a;if(s=this.frames.indexOf(e),a={index:s,last:s===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:g.name==="chrome"},e.data!=null)a.data=e.data;else if(e.context!=null)a.data=this.getContextData(e.context);else if(e.image!=null)a.data=this.getImageData(e.image);else throw new Error("Invalid frame");return a},u.prototype.log=function(){var e;if(e=1<=arguments.length?i.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,e)},u}(t),m.exports=f},{"./browser.coffee":2,events:1}]},{},[3])(3)})})(ae);var _e=ae.exports;const we=pe(_e),be=12,ye=Math.floor(1e3/be);async function ke(d,o){const l=new Path2D(o);d.strokeStyle="#000",d.lineWidth=4,d.lineCap="round",d.stroke(l)}async function xe({frames:d,width:o,height:l}){return new Promise(async(m,w)=>{const t=navigator.hardwareConcurrency||4,f=Math.max(2,t/2),g=new we({workers:f,workerScript:"../assets/gif.worker.js",quality:1,width:o,height:l}),v=document.createElement("canvas"),c=v.getContext("2d");v.width=o,v.height=l;for(const n of d)c.clearRect(0,0,o,l),c.fillStyle="#fff",c.fillRect(0,0,o,l),await ke(c,n),g.addFrame(c,{copy:!0,delay:ye});g.on("finished",n=>{m(URL.createObjectURL(n))}),g.on("error",()=>{console.log(error),w("Error rendering gif")}),g.render()})}function Ce(d){let o,l,m="Frames:",w,t,f,g="Add",v,c,n="Clear",i,r,p=d[6]?"Stop":"Play",_,u,e,s;return{c(){o=P("div"),l=P("p"),l.textContent=m,w=O(),t=P("div"),f=P("button"),f.textContent=g,v=O(),c=P("button"),c.textContent=n,i=O(),r=P("button"),_=q(p),u=q(" Preview"),this.h()},l(a){o=D(a,"DIV",{class:!0,slot:!0});var h=I(o);l=D(h,"P",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1kove1c"&&(l.textContent=m),w=N(h),t=D(h,"DIV",{class:!0});var k=I(t);f=D(k,"BUTTON",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-u2k0bg"&&(f.textContent=g),v=N(k),c=D(k,"BUTTON",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-vb2at4"&&(c.textContent=n),i=N(k),r=D(k,"BUTTON",{class:!0});var C=I(r);_=A(C,p),u=A(C," Preview"),C.forEach(W),k.forEach(W),h.forEach(W),this.h()},h(){E(l,"class","svelte-2vvmeo"),E(f,"class","small svelte-2vvmeo"),E(c,"class","small svelte-2vvmeo"),E(r,"class","small svelte-2vvmeo"),E(t,"class","buttons svelte-2vvmeo"),E(o,"class","ui svelte-2vvmeo"),E(o,"slot","ui")},m(a,h){G(a,o,h),b(o,l),b(o,w),b(o,t),b(t,f),b(t,v),b(t,c),b(t,i),b(t,r),b(r,_),b(r,u),e||(s=[j(f,"click",d[7]),j(c,"click",d[8]),j(r,"click",d[9])],e=!0)},p(a,h){h&64&&p!==(p=a[6]?"Stop":"Play")&&V(_,p)},d(a){a&&W(o),e=!1,ue(s)}}}function ne(d){let o,l,m,w,t,f;return{c(){o=P("div"),l=P("a"),m=q("Download"),w=O(),t=P("img"),this.h()},l(g){o=D(g,"DIV",{class:!0});var v=I(o);l=D(v,"A",{role:!0,href:!0,download:!0});var c=I(l);m=A(c,"Download"),c.forEach(W),w=N(v),t=D(v,"IMG",{src:!0,alt:!0}),v.forEach(W),this.h()},h(){E(l,"role","button"),E(l,"href",d[4]),E(l,"download","animation.gif"),ee(t.src,f=d[4])||E(t,"src",f),E(t,"alt","animation"),E(o,"class","share svelte-2vvmeo")},m(g,v){G(g,o,v),b(o,l),b(l,m),b(o,w),b(o,t)},p(g,v){v&16&&E(l,"href",g[4]),v&16&&!ee(t.src,f=g[4])&&E(t,"src",f)},d(g){g&&W(o)}}}function Ee(d){let o,l,m,w,t,f,g,v,c,n,i,r,p,_,u,e=d[5]?"Rendering":"Share",s,a,h,k,C;function T(y){d[12](y)}let R={showFrameIndex:!0,$$slots:{ui:[Ce]},$$scope:{ctx:d}};d[3]!==void 0&&(R.paths=d[3]),i=new me({props:R}),d[11](i),se.push(()=>de(i,"paths",T));let L=d[4]&&ne(d);return{c(){o=P("section"),l=P("p"),m=new le(!1),w=O(),t=P("br"),f=O(),g=P("em"),v=q("Note: "),c=q(d[1]),n=O(),H(i.$$.fragment),p=O(),_=P("div"),u=P("button"),s=q(e),a=O(),L&&L.c(),this.h()},l(y){o=D(y,"SECTION",{id:!0,class:!0});var x=I(o);l=D(x,"P",{class:!0});var F=I(l);m=fe(F,!1),w=N(F),t=D(F,"BR",{}),f=N(F),g=D(F,"EM",{});var M=I(g);v=A(M,"Note: "),c=A(M,d[1]),M.forEach(W),F.forEach(W),n=N(x),Q(i.$$.fragment,x),p=N(x),_=D(x,"DIV",{class:!0});var S=I(_);u=D(S,"BUTTON",{class:!0});var U=I(u);s=A(U,e),U.forEach(W),S.forEach(W),a=N(x),L&&L.l(x),x.forEach(W),this.h()},h(){m.a=w,E(l,"class","svelte-2vvmeo"),u.disabled=d[5],E(u,"class","svelte-2vvmeo"),E(_,"class","render svelte-2vvmeo"),E(o,"id","playground"),E(o,"class","svelte-2vvmeo")},m(y,x){G(y,o,x),b(o,l),m.m(d[0],l),b(l,w),b(l,t),b(l,f),b(l,g),b(g,v),b(g,c),b(o,n),J(i,o,null),b(o,p),b(o,_),b(_,u),b(u,s),b(o,a),L&&L.m(o,null),h=!0,k||(C=j(u,"click",d[10]),k=!0)},p(y,[x]){(!h||x&1)&&m.p(y[0]),(!h||x&2)&&V(c,y[1]);const F={};x&8256&&(F.$$scope={dirty:x,ctx:y}),!r&&x&8&&(r=!0,F.paths=y[3],he(()=>r=!1)),i.$set(F),(!h||x&32)&&e!==(e=y[5]?"Rendering":"Share")&&V(s,e),(!h||x&32)&&(u.disabled=y[5]),y[4]?L?L.p(y,x):(L=ne(y),L.c(),L.m(o,null)):L&&(L.d(1),L=null)},i(y){h||(K(i.$$.fragment,y),h=!0)},o(y){X(i.$$.fragment,y),h=!1},d(y){y&&W(o),d[11](null),Y(i),L&&L.d(),k=!1,C()}}}function Le(d,o,l){let{text:m="Make an animation!"}=o,{note:w}=o,t,f,g,v,c;function n(){t.addFrame()}function i(){t.clearFrame()}function r(){t.preview(),l(6,c=!c)}async function p(){l(5,v=!0),l(4,g=await xe({frames:f,width:300,height:300})),l(5,v=!1)}function _(e){se[e?"unshift":"push"](()=>{t=e,l(2,t)})}function u(e){f=e,l(3,f)}return d.$$set=e=>{"text"in e&&l(0,m=e.text),"note"in e&&l(1,w=e.note)},[m,w,t,f,g,v,c,n,i,r,p,_,u]}class Fe extends ie{constructor(o){super(),oe(this,o,Le,Ee,re,{text:0,note:1})}}function Pe(d){let o,l,m,w;return o=new ve({props:{title:d[0],description:d[1],url:d[2],keywords:d[3]}}),m=new Fe({props:{note:Z.playgroundNote}}),{c(){H(o.$$.fragment),l=O(),H(m.$$.fragment)},l(t){Q(o.$$.fragment,t),l=N(t),Q(m.$$.fragment,t)},m(t,f){J(o,t,f),G(t,l,f),J(m,t,f),w=!0},p:ce,i(t){w||(K(o.$$.fragment,t),K(m.$$.fragment,t),w=!0)},o(t){X(o.$$.fragment,t),X(m.$$.fragment,t),w=!1},d(t){t&&W(l),Y(o,t),Y(m,t)}}}function De(d,o,l){let{data:m}=o;ge();const{title:w,description:t,url:f,keywords:g}=Z;return te("copy",Z),te("data",m.data),d.$$set=v=>{"data"in v&&l(4,m=v.data)},[w,t,f,g,m]}class Re extends ie{constructor(o){super(),oe(this,o,De,Pe,re,{data:4})}}export{Re as component};
