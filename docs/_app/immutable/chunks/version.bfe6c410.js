import{s as Ct,f as E,e as $,O as St,g as P,d as m,j as o,v as g,w as ft,F as Nt,i as j,S as Rt,T as W,a as z,l as U,h as q,U as J,c as V,m as Y,K as G,D as H,n as Q,G as Ft,o as qt,u as Z,V as jt,k as K}from"./scheduler.03bad25f.js";import{e as ht}from"./each.e59479a4.js";import{S as xt,i as Lt,a as nt,g as Dt,t as mt,c as Ot,h as dt}from"./index.29cfdd55.js";function vt(n,t,e){const a=n.slice();return a[5]=t[e],a}function gt(n){let t,e;return{c(){t=E("link"),this.h()},l(a){t=P(a,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){o(t,"rel","preload"),o(t,"href",e=n[5]),o(t,"as","font"),o(t,"type","font/woff2"),o(t,"crossorigin","")},m(a,r){j(a,t,r)},p(a,r){r&16&&e!==(e=a[5])&&o(t,"href",e)},d(a){a&&m(t)}}}function zt(n){let t,e,a,r,l,f,h,c,T,M,p,d,s,v,y,u,_,C,L,A,F,R,S,N,D,w;document.title=t=n[0];let I=ht(n[4]),x=[];for(let k=0;k<I.length;k+=1)x[k]=gt(vt(n,I,k));return{c(){e=E("meta"),a=E("meta"),r=E("meta"),l=E("meta"),f=E("meta"),h=E("meta"),c=E("meta"),T=E("meta"),M=E("meta"),p=E("meta"),s=E("meta"),v=E("meta"),y=E("meta"),u=E("meta"),_=E("meta"),C=E("meta"),L=E("meta"),A=E("meta"),F=E("meta"),S=E("meta"),N=E("link");for(let k=0;k<x.length;k+=1)x[k].c();w=$(),this.h()},l(k){const i=St("svelte-1htu80s",document.head);e=P(i,"META",{name:!0,content:!0}),a=P(i,"META",{name:!0,content:!0}),r=P(i,"META",{name:!0,content:!0}),l=P(i,"META",{property:!0,content:!0}),f=P(i,"META",{property:!0,content:!0}),h=P(i,"META",{property:!0,content:!0}),c=P(i,"META",{property:!0,content:!0}),T=P(i,"META",{property:!0,content:!0}),M=P(i,"META",{property:!0,content:!0}),p=P(i,"META",{property:!0,content:!0}),s=P(i,"META",{property:!0,content:!0}),v=P(i,"META",{property:!0,content:!0}),y=P(i,"META",{property:!0,content:!0}),u=P(i,"META",{name:!0,content:!0}),_=P(i,"META",{name:!0,content:!0}),C=P(i,"META",{name:!0,content:!0}),L=P(i,"META",{name:!0,content:!0}),A=P(i,"META",{name:!0,content:!0}),F=P(i,"META",{name:!0,content:!0}),S=P(i,"META",{name:!0,content:!0}),N=P(i,"LINK",{rel:!0,href:!0});for(let b=0;b<x.length;b+=1)x[b].l(i);w=$(),i.forEach(m),this.h()},h(){o(e,"name","description"),o(e,"content",n[1]),o(a,"name","author"),o(a,"content","The Pudding"),o(r,"name","news_keywords"),o(r,"content",n[3]),o(l,"property","og:title"),o(l,"content",n[0]),o(f,"property","og:site_name"),o(f,"content","The Pudding"),o(h,"property","og:url"),o(h,"content",n[2]),o(c,"property","og:description"),o(c,"content",n[1]),o(T,"property","og:type"),o(T,"content","article"),o(M,"property","og:locale"),o(M,"content","en_US"),o(p,"property","og:image"),o(p,"content",d=n[2]+"/assets/social-facebook.jpg"),o(s,"property","og:image:type"),o(s,"content","image/jpeg"),o(v,"property","og:image:width"),o(v,"content","1200"),o(y,"property","og:image:height"),o(y,"content","600"),o(u,"name","twitter:card"),o(u,"content","summary_large_image"),o(_,"name","twitter:site"),o(_,"content","https://pudding.cool"),o(C,"name","twitter:creator"),o(C,"content","@puddingviz"),o(L,"name","twitter:title"),o(L,"content",n[0]),o(A,"name","twitter:description"),o(A,"content",n[1]),o(F,"name","twitter:image:src"),o(F,"content",R=n[2]+"/assets/social-twitter.jpg"),o(S,"name","robots"),o(S,"content","max-image-preview:large"),o(N,"rel","canonical"),o(N,"href",D=n[2]+"/")},m(k,i){g(document.head,e),g(document.head,a),g(document.head,r),g(document.head,l),g(document.head,f),g(document.head,h),g(document.head,c),g(document.head,T),g(document.head,M),g(document.head,p),g(document.head,s),g(document.head,v),g(document.head,y),g(document.head,u),g(document.head,_),g(document.head,C),g(document.head,L),g(document.head,A),g(document.head,F),g(document.head,S),g(document.head,N);for(let b=0;b<x.length;b+=1)x[b]&&x[b].m(document.head,null);g(document.head,w)},p(k,[i]){if(i&1&&t!==(t=k[0])&&(document.title=t),i&2&&o(e,"content",k[1]),i&8&&o(r,"content",k[3]),i&1&&o(l,"content",k[0]),i&4&&o(h,"content",k[2]),i&2&&o(c,"content",k[1]),i&4&&d!==(d=k[2]+"/assets/social-facebook.jpg")&&o(p,"content",d),i&1&&o(L,"content",k[0]),i&2&&o(A,"content",k[1]),i&4&&R!==(R=k[2]+"/assets/social-twitter.jpg")&&o(F,"content",R),i&4&&D!==(D=k[2]+"/")&&o(N,"href",D),i&16){I=ht(k[4]);let b;for(b=0;b<I.length;b+=1){const O=vt(k,I,b);x[b]?x[b].p(O,i):(x[b]=gt(O),x[b].c(),x[b].m(w.parentNode,w))}for(;b<x.length;b+=1)x[b].d(1);x.length=I.length}},i:ft,o:ft,d(k){m(e),m(a),m(r),m(l),m(f),m(h),m(c),m(T),m(M),m(p),m(s),m(v),m(y),m(u),m(_),m(C),m(L),m(A),m(F),m(S),m(N),Nt(x,k),m(w)}}}function Vt(n,t,e){let{title:a="Title TK"}=t,{description:r="Description TK"}=t,{url:l="https://pudding.cool"}=t,{keywords:f=""}=t,{preloadFont:h=[]}=t;return n.$$set=c=>{"title"in c&&e(0,a=c.title),"description"in c&&e(1,r=c.description),"url"in c&&e(2,l=c.url),"keywords"in c&&e(3,f=c.keywords),"preloadFont"in c&&e(4,h=c.preloadFont)},[a,r,l,f,h]}class ue extends xt{constructor(t){super(),Lt(this,t,Vt,zt,Ct,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function pt(n,{delay:t=0,duration:e=400,easing:a=Rt}={}){const r=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:a,css:l=>`opacity: ${l*r}`}}var _t=function(n){return n[n.length-1]},yt=function(n){return n.reduce(function(t,e){return t+e},0)},at=function(n){var t=n.reduce(function(e,a){return a+e},0);return t/n.length},it=function(n,t){return{x:n.x-t.x,y:n.y-t.y}},It=function(n){var t=n.x,e=n.y;return Math.sqrt(t*t+e*e)},B=function(n,t){return It(it(n,t))},ot=function(n){var t=n[0],e=n.slice(1);return e.reduce(function(a,r){var l=B(r,t);return t=r,a+l},0)},Wt=function(n,t,e){var a=it(t,n),r=e/It(a);return{x:t.x+r*a.x,y:t.y+r*a.y}},rt=function(n,t){for(var e=t.numPoints,a=e===void 0?50:e,r=ot(n),l=r/(a-1),f=[n[0]],h=_t(n),c=n.slice(1),T=0;T<a-2;T++)for(var M=_t(f),p=l,d=!1;!d;){var s=B(M,c[0]);if(s<p)p-=s,M=c.shift();else{var v=Wt(M,c[0],p-s);f.push(v),d=!0}}return f.push(h),f},Jt=function(n,t){return n.map(function(e){return{x:Math.cos(-1*t)*e.x-Math.sin(-1*t)*e.y,y:Math.sin(-1*t)*e.x+Math.cos(-1*t)*e.y}})},st=function(n,t){for(var e=n.length>=t.length?n:t,a=n.length>=t.length?t:n,r=function(T,M,p,d){if(T===0&&M===0)return B(e[0],a[0]);if(T>0&&M===0)return Math.max(p[0],B(e[T],a[0]));var s=d[d.length-1];return T===0&&M>0?Math.max(s,B(e[0],a[M])):Math.max(Math.min(p[M],p[M-1],s),B(e[T],a[M]))},l=[],f=0;f<e.length;f++){for(var h=[],c=0;c<a.length;c++)h.push(r(f,c,l,h));l=h}return l[a.length-1]},bt=function(n,t){t===void 0&&(t={});var e=t.rebalance,a=e===void 0?!0:e,r=t.estimationPoints,l=r===void 0?50:r,f=a?rt(n,{numPoints:l}):n,h=at(f.map(function(d){return d.x})),c=at(f.map(function(d){return d.y})),T={x:h,y:c},M=f.map(function(d){return it(d,T)}),p=Math.sqrt(at(M.map(function(d){var s=d.x,v=d.y;return s*s+v*v})));return M.map(function(d){return{x:d.x/p,y:d.y/p}})},Kt=function(n,t){if(n.length!==t.length)throw new Error("curve and relativeCurve must have the same length");var e=yt(n.map(function(r,l){var f=r.x,h=r.y;return h*t[l].x-f*t[l].y})),a=yt(n.map(function(r,l){var f=r.x,h=r.y;return f*t[l].x+h*t[l].y}));return Math.atan2(e,a)},Mt=function(n,t,e){e===void 0&&(e={});var a=e.estimationPoints,r=a===void 0?50:a,l=e.rotations,f=l===void 0?10:l,h=e.restrictRotationAngle,c=h===void 0?Math.PI:h,T=e.checkRotations,M=T===void 0?!0:T;if(Math.abs(c)>Math.PI)throw new Error("restrictRotationAngle cannot be larger than PI");var p=bt(n,{estimationPoints:r}),d=bt(t,{estimationPoints:r}),s=Math.sqrt(ot(p)*ot(d)),v=[0];if(M){var y=Kt(p,d);y>Math.PI&&(y=y-2*Math.PI),y!==0&&Math.abs(y)<c&&v.push(y);for(var u=0;u<f;u++){var _=-1*c+2*u*c/(f-1);_!==0&&_!==Math.PI&&v.push(_)}}var C=1/0;return v.forEach(function(L){var A=Jt(p,L),F=st(A,d);F<C&&(C=F)}),Math.max(1-C/(s/Math.sqrt(2)),0)};function wt(n){let t=0;for(let e=1;e<n.length;e++){const a=n[e-1],r=n[e];t+=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))}return t}function Ut({cur:n,prev:t,diagonal:e}){const a=Math.max(t.length,n.length),r=rt(n,{numPoints:a}),l=rt(t,{numPoints:a}),f=[...l].reverse(),h={estimationPoints:200,rotations:30},c=Mt(l,r,h),T=Mt(f,r,h),M=wt(r),p=wt(l),d=Math.max(M,p),s=Math.abs(M/p-1),v=st(l,r),y=st(f,r),u=v/e,_=y/e,C=v/d,L=y/d;let A=.075;p<100&&(A=.2),p<200&&(A=.15),p<300&&(A=.1);const F=s<A&&c>.9&&(u<.2||C<.2),R=s<A&&T>.9&&(_<.2||L<.2);return{valid:F||R,debug1:{ll_target:A,ll:+s.toFixed(2),sim:+c.toFixed(2),diag:+u.toFixed(2),len:+C.toFixed(2),pass:F},debug2:{ll_target:A,ll:+s.toFixed(2),sim:+T.toFixed(2),diag:+_.toFixed(2),len:+L.toFixed(2),pass:R}}}function kt(n){let t;return{c(){t=W("path"),this.h()},l(e){t=J(e,"path",{class:!0,d:!0}),q(t).forEach(m),this.h()},h(){o(t,"class","prev svelte-oxlh63"),o(t,"d",n[4])},m(e,a){j(e,t,a)},p(e,a){a&16&&o(t,"d",e[4])},d(e){e&&m(t)}}}function Et(n){let t,e="I think you can do better!",a,r;return{c(){t=E("p"),t.textContent=e,this.h()},l(l){t=P(l,"P",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-5wu51j"&&(t.textContent=e),this.h()},h(){o(t,"class","invalid svelte-oxlh63")},m(l,f){j(l,t,f),r=!0},i(l){r||(l&&jt(()=>{r&&(a||(a=dt(t,pt,{},!0)),a.run(1))}),r=!0)},o(l){l&&(a||(a=dt(t,pt,{},!1)),a.run(0)),r=!1},d(l){l&&m(t),l&&a&&a.end()}}}function Pt(n){let t,e,a="submit",r,l="reset",f,h,c,T=`target: ll < ~0.1 && sim > 0.9 && (diag < 0.2 || len <
			0.2)`,M,p,d,s=JSON.stringify(n[8])+"",v,y,u,_,C=JSON.stringify(n[9])+"",L,A,F,R,S,N,D,w,I,x,k;return{c(){t=E("div"),e=E("button"),e.textContent=a,r=E("button"),r.textContent=l,f=z(),h=E("div"),c=E("p"),c.textContent=T,M=z(),p=E("p"),d=U("debug1: "),v=U(s),y=z(),u=E("p"),_=U("debug2: "),L=U(C),A=z(),F=E("div"),R=W("svg"),S=W("g"),N=W("path"),D=z(),w=E("p"),I=U(n[6]),this.h()},l(i){t=P(i,"DIV",{class:!0});var b=q(t);e=P(b,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-13qkurs"&&(e.textContent=a),r=P(b,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-1lebb1"&&(r.textContent=l),b.forEach(m),f=V(i),h=P(i,"DIV",{class:!0});var O=q(h);c=P(O,"P",{style:!0,"data-svelte-h":!0}),Z(c)!=="svelte-nkrnij"&&(c.textContent=T),M=V(O),p=P(O,"P",{style:!0});var tt=q(p);d=Y(tt,"debug1: "),v=Y(tt,s),tt.forEach(m),y=V(O),u=P(O,"P",{style:!0});var et=q(u);_=Y(et,"debug2: "),L=Y(et,C),et.forEach(m),O.forEach(m),A=V(i),F=P(i,"DIV",{class:!0});var X=q(F);R=J(X,"svg",{class:!0});var lt=q(R);S=J(lt,"g",{});var ut=q(S);N=J(ut,"path",{d:!0,class:!0}),q(N).forEach(m),ut.forEach(m),lt.forEach(m),D=V(X),w=P(X,"P",{class:!0});var ct=q(w);I=Y(ct,n[6]),ct.forEach(m),X.forEach(m),this.h()},h(){o(e,"class","svelte-oxlh63"),o(r,"class","svelte-oxlh63"),o(t,"class","c ui svelte-oxlh63"),K(c,"font-family","var(--mono)"),K(c,"font-size","12px"),K(p,"font-family","var(--mono)"),K(p,"font-size","12px"),K(u,"font-family","var(--mono)"),K(u,"font-size","12px"),o(h,"class","debug"),o(N,"d",n[5]),o(N,"class","svelte-oxlh63"),o(R,"class","shadow svelte-oxlh63"),o(w,"class","svelte-oxlh63"),o(F,"class","c svelte-oxlh63")},m(i,b){j(i,t,b),g(t,e),g(t,r),j(i,f,b),j(i,h,b),g(h,c),g(h,M),g(h,p),g(p,d),g(p,v),g(h,y),g(h,u),g(u,_),g(u,L),j(i,A,b),j(i,F,b),g(F,R),g(R,S),g(S,N),g(F,D),g(F,w),g(w,I),x||(k=[H(e,"click",n[13]),H(r,"click",n[14])],x=!0)},p(i,b){b&256&&s!==(s=JSON.stringify(i[8])+"")&&Q(v,s),b&512&&C!==(C=JSON.stringify(i[9])+"")&&Q(L,C),b&32&&o(N,"d",i[5]),b&64&&Q(I,i[6])},d(i){i&&(m(t),m(f),m(h),m(A),m(F)),x=!1,Ft(k)}}}function Yt(n){let t,e,a,r,l,f,h,c,T,M,p,d,s=n[4]&&kt(n),v=n[7]===!1&&Et(),y=!n[0]&&Pt(n);return{c(){t=E("div"),e=W("svg"),a=W("g"),s&&s.c(),r=W("path"),l=z(),f=E("p"),h=U(n[2]),c=z(),v&&v.c(),T=z(),y&&y.c(),M=$(),this.h()},l(u){t=P(u,"DIV",{class:!0});var _=q(t);e=J(_,"svg",{class:!0});var C=q(e);a=J(C,"g",{});var L=q(a);s&&s.l(L),r=J(L,"path",{d:!0,class:!0}),q(r).forEach(m),L.forEach(m),C.forEach(m),l=V(_),f=P(_,"P",{class:!0});var A=q(f);h=Y(A,n[2]),A.forEach(m),c=V(_),v&&v.l(_),_.forEach(m),T=V(u),y&&y.l(u),M=$(),this.h()},h(){o(r,"d",n[3]),o(r,"class","svelte-oxlh63"),o(e,"class","shadow svelte-oxlh63"),o(f,"class","svelte-oxlh63"),o(t,"class","c svelte-oxlh63"),G(t,"first",n[2]===0),G(t,"disabled",n[1])},m(u,_){j(u,t,_),g(t,e),g(e,a),s&&s.m(a,null),g(a,r),g(t,l),g(t,f),g(f,h),g(t,c),v&&v.m(t,null),j(u,T,_),y&&y.m(u,_),j(u,M,_),p||(d=[H(t,"pointerdown",n[10]),H(t,"pointermove",n[11]),H(t,"pointerup",n[12]),H(t,"pointerleave",n[12])],p=!0)},p(u,[_]){u[4]?s?s.p(u,_):(s=kt(u),s.c(),s.m(a,r)):s&&(s.d(1),s=null),_&8&&o(r,"d",u[3]),_&4&&Q(h,u[2]),u[7]===!1?v?_&128&&nt(v,1):(v=Et(),v.c(),nt(v,1),v.m(t,null)):v&&(Dt(),mt(v,1,1,()=>{v=null}),Ot()),_&4&&G(t,"first",u[2]===0),_&2&&G(t,"disabled",u[1]),u[0]?y&&(y.d(1),y=null):y?y.p(u,_):(y=Pt(u),y.c(),y.m(M.parentNode,M))},i(u){nt(v)},o(u){mt(v)},d(u){u&&(m(t),m(T),m(M)),s&&s.d(),v&&v.d(),y&&y.d(u),p=!1,Ft(d)}}}const Tt=300,Ht=12;function At(n){const t=+n.offsetX.toFixed(1),e=+n.offsetY.toFixed(1);return[t,e]}function Bt(n,t,e){let a,r,{human:l}=t,{preset:f}=t,{path:h}=t,{disabled:c}=t;const T=Tt,M=[[[50,150],[250,150]],[[50,225],[150,75],[250,225],[50,225]],[[50,50],[250,50],[250,250],[50,250],[50,50]]];let p=!1,d=1,s=[],v="",y="",u="",_,C={},L={};function A(w){p=!0;const I=At(w);e(17,s[d]=[],s),s[d].push(I)}function F(w){if(!p)return;const I=At(w);s[d].push(I),e(17,s=[...s])}function R(){p=!1}function S(w=0){var I;if(e(6,u=w+1),u>d-1&&e(6,u=0),!((I=s[u])!=null&&I.length))setTimeout(S,1e3);else{const x=s[u].map(k=>k.join(" ")).join(" L ");e(5,y=`M ${x}`),setTimeout(()=>{S(u)},1e3/Ht)}}function N(){if(d>0){const w=[...s[d]].map(([i,b])=>({x:i,y:b})),I=[...s[d-1]].map(([i,b])=>({x:i,y:b})),x=Math.sqrt(Tt**2+T**2),k=Ut({cur:w,prev:I,diagonal:x});e(7,_=k.valid),e(8,C=k.debug1),e(9,L=k.debug2),_?(e(4,v=r),e(2,d+=1)):setTimeout(()=>{e(7,_=void 0)},2e3),e(18,a=[])}}function D(){e(17,s[d]=[],s)}return qt(()=>{e(17,s=[M[f]||[[0,0]]]),e(4,v=`M ${s[0].map(w=>w.join(" ")).join(" L ")}`),S()}),n.$$set=w=>{"human"in w&&e(0,l=w.human),"preset"in w&&e(16,f=w.preset),"path"in w&&e(15,h=w.path),"disabled"in w&&e(1,c=w.disabled)},n.$$.update=()=>{var w;n.$$.dirty&131076&&e(18,a=(w=s[d])==null?void 0:w.map(I=>I.join(" ")).join(" L ")),n.$$.dirty&262144&&e(3,r=a!=null&&a.length?`M ${a}`:""),n.$$.dirty&8&&e(15,h=r)},[l,c,d,r,v,y,u,_,C,L,A,F,R,N,D,h,f,s,a]}class ce extends xt{constructor(t){super(),Lt(this,t,Bt,Yt,Ct,{human:0,preset:16,path:15,disabled:1})}}const Xt="Help draw the world’s most collaborative animation.",Gt="Your contribution will just take a few seconds. <br>It’s like the <a target=_blank rel=noreferrer href=https://en.wikipedia.org/wiki/Chinese_whispers>game of telephone</a>, but visual.",Qt="frames have been drawn.",Zt="people are waiting for their turn.",$t="Just two quick steps.",te="How do you want to be notified of your turn? <br><em>choose one or both</em>",ee="You’ll get just three messages",ne=["When it’s almost your turn","When it is your turn to draw","When the animation is done"],ae="Prove it. Draw a circle.",oe="Eh, good enough.",re="Please trace the <mark><strong>last person’s drawing</strong></mark> as best you can.",fe={cta:Xt,definition:Gt,statsFrames:Qt,statsWaiting:Zt,prompt:$t,stepNotify:te,messageP:ee,messageLi:ne,humanPrompt:ae,humanReview:oe,task:re};function he(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.13.0"),console.log("build: 2023-10-25-15:54"),console.log("--- --- --- --- --- ---")}export{ce as C,ue as M,fe as c,he as v};
