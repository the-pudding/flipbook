import{s as Ct,n as ut,k as St,r as Ft,o as Nt,l as zt}from"./scheduler.fcd7ba46.js";import{S as Lt,i as It,g as w,e as Z,F as Rt,h as E,f as v,k as r,z as p,E as qt,a as j,I as V,s as J,m as H,j as q,J as Y,c as K,n as U,A as ft,C as B,o as W,d as et,p as jt,t as mt,b as Dt,y as Q,K as ht,l as O}from"./index.c835e732.js";import{e as dt}from"./each.e59479a4.js";function vt(n,t,e){const a=n.slice();return a[5]=t[e],a}function gt(n){let t,e;return{c(){t=w("link"),this.h()},l(a){t=E(a,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){r(t,"rel","preload"),r(t,"href",e=n[5]),r(t,"as","font"),r(t,"type","font/woff2"),r(t,"crossorigin","")},m(a,o){j(a,t,o)},p(a,o){o&16&&e!==(e=a[5])&&r(t,"href",e)},d(a){a&&v(t)}}}function Ot(n){let t,e,a,o,i,m,g,c,k,h,s,y,d,u,_,f,b,L,I,T,C,z,R,P,x,S;document.title=t=n[0];let N=dt(n[4]),F=[];for(let A=0;A<N.length;A+=1)F[A]=gt(vt(n,N,A));return{c(){e=w("meta"),a=w("meta"),o=w("meta"),i=w("meta"),m=w("meta"),g=w("meta"),c=w("meta"),k=w("meta"),h=w("meta"),s=w("meta"),d=w("meta"),u=w("meta"),_=w("meta"),f=w("meta"),b=w("meta"),L=w("meta"),I=w("meta"),T=w("meta"),C=w("meta"),R=w("meta"),P=w("link");for(let A=0;A<F.length;A+=1)F[A].c();S=Z(),this.h()},l(A){const l=Rt("svelte-1htu80s",document.head);e=E(l,"META",{name:!0,content:!0}),a=E(l,"META",{name:!0,content:!0}),o=E(l,"META",{name:!0,content:!0}),i=E(l,"META",{property:!0,content:!0}),m=E(l,"META",{property:!0,content:!0}),g=E(l,"META",{property:!0,content:!0}),c=E(l,"META",{property:!0,content:!0}),k=E(l,"META",{property:!0,content:!0}),h=E(l,"META",{property:!0,content:!0}),s=E(l,"META",{property:!0,content:!0}),d=E(l,"META",{property:!0,content:!0}),u=E(l,"META",{property:!0,content:!0}),_=E(l,"META",{property:!0,content:!0}),f=E(l,"META",{name:!0,content:!0}),b=E(l,"META",{name:!0,content:!0}),L=E(l,"META",{name:!0,content:!0}),I=E(l,"META",{name:!0,content:!0}),T=E(l,"META",{name:!0,content:!0}),C=E(l,"META",{name:!0,content:!0}),R=E(l,"META",{name:!0,content:!0}),P=E(l,"LINK",{rel:!0,href:!0});for(let M=0;M<F.length;M+=1)F[M].l(l);S=Z(),l.forEach(v),this.h()},h(){r(e,"name","description"),r(e,"content",n[1]),r(a,"name","author"),r(a,"content","The Pudding"),r(o,"name","news_keywords"),r(o,"content",n[3]),r(i,"property","og:title"),r(i,"content",n[0]),r(m,"property","og:site_name"),r(m,"content","The Pudding"),r(g,"property","og:url"),r(g,"content",n[2]),r(c,"property","og:description"),r(c,"content",n[1]),r(k,"property","og:type"),r(k,"content","article"),r(h,"property","og:locale"),r(h,"content","en_US"),r(s,"property","og:image"),r(s,"content",y=n[2]+"/assets/social-facebook.jpg"),r(d,"property","og:image:type"),r(d,"content","image/jpeg"),r(u,"property","og:image:width"),r(u,"content","1200"),r(_,"property","og:image:height"),r(_,"content","600"),r(f,"name","twitter:card"),r(f,"content","summary_large_image"),r(b,"name","twitter:site"),r(b,"content","https://pudding.cool"),r(L,"name","twitter:creator"),r(L,"content","@puddingviz"),r(I,"name","twitter:title"),r(I,"content",n[0]),r(T,"name","twitter:description"),r(T,"content",n[1]),r(C,"name","twitter:image:src"),r(C,"content",z=n[2]+"/assets/social-twitter.jpg"),r(R,"name","robots"),r(R,"content","max-image-preview:large"),r(P,"rel","canonical"),r(P,"href",x=n[2]+"/")},m(A,l){p(document.head,e),p(document.head,a),p(document.head,o),p(document.head,i),p(document.head,m),p(document.head,g),p(document.head,c),p(document.head,k),p(document.head,h),p(document.head,s),p(document.head,d),p(document.head,u),p(document.head,_),p(document.head,f),p(document.head,b),p(document.head,L),p(document.head,I),p(document.head,T),p(document.head,C),p(document.head,R),p(document.head,P);for(let M=0;M<F.length;M+=1)F[M]&&F[M].m(document.head,null);p(document.head,S)},p(A,[l]){if(l&1&&t!==(t=A[0])&&(document.title=t),l&2&&r(e,"content",A[1]),l&8&&r(o,"content",A[3]),l&1&&r(i,"content",A[0]),l&4&&r(g,"content",A[2]),l&2&&r(c,"content",A[1]),l&4&&y!==(y=A[2]+"/assets/social-facebook.jpg")&&r(s,"content",y),l&1&&r(I,"content",A[0]),l&2&&r(T,"content",A[1]),l&4&&z!==(z=A[2]+"/assets/social-twitter.jpg")&&r(C,"content",z),l&4&&x!==(x=A[2]+"/")&&r(P,"href",x),l&16){N=dt(A[4]);let M;for(M=0;M<N.length;M+=1){const D=vt(A,N,M);F[M]?F[M].p(D,l):(F[M]=gt(D),F[M].c(),F[M].m(S.parentNode,S))}for(;M<F.length;M+=1)F[M].d(1);F.length=N.length}},i:ut,o:ut,d(A){v(e),v(a),v(o),v(i),v(m),v(g),v(c),v(k),v(h),v(s),v(d),v(u),v(_),v(f),v(b),v(L),v(I),v(T),v(C),v(R),v(P),qt(F,A),v(S)}}}function Jt(n,t,e){let{title:a="Title TK"}=t,{description:o="Description TK"}=t,{url:i="https://pudding.cool"}=t,{keywords:m=""}=t,{preloadFont:g=[]}=t;return n.$$set=c=>{"title"in c&&e(0,a=c.title),"description"in c&&e(1,o=c.description),"url"in c&&e(2,i=c.url),"keywords"in c&&e(3,m=c.keywords),"preloadFont"in c&&e(4,g=c.preloadFont)},[a,o,i,m,g]}class oe extends Lt{constructor(t){super(),It(this,t,Jt,Ot,Ct,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function pt(n,{delay:t=0,duration:e=400,easing:a=St}={}){const o=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:a,css:i=>`opacity: ${i*o}`}}var _t=function(n){return n[n.length-1]},yt=function(n){return n.reduce(function(t,e){return t+e},0)},nt=function(n){var t=n.reduce(function(e,a){return a+e},0);return t/n.length},st=function(n,t){return{x:n.x-t.x,y:n.y-t.y}},xt=function(n){var t=n.x,e=n.y;return Math.sqrt(t*t+e*e)},X=function(n,t){return xt(st(n,t))},at=function(n){var t=n[0],e=n.slice(1);return e.reduce(function(a,o){var i=X(o,t);return t=o,a+i},0)},Kt=function(n,t,e){var a=st(t,n),o=e/xt(a);return{x:t.x+o*a.x,y:t.y+o*a.y}},rt=function(n,t){for(var e=t.numPoints,a=e===void 0?50:e,o=at(n),i=o/(a-1),m=[n[0]],g=_t(n),c=n.slice(1),k=0;k<a-2;k++)for(var h=_t(m),s=i,y=!1;!y;){var d=X(h,c[0]);if(d<s)s-=d,h=c.shift();else{var u=Kt(h,c[0],s-d);m.push(u),y=!0}}return m.push(g),m},Vt=function(n,t){return n.map(function(e){return{x:Math.cos(-1*t)*e.x-Math.sin(-1*t)*e.y,y:Math.sin(-1*t)*e.x+Math.cos(-1*t)*e.y}})},ot=function(n,t){for(var e=n.length>=t.length?n:t,a=n.length>=t.length?t:n,o=function(k,h,s,y){if(k===0&&h===0)return X(e[0],a[0]);if(k>0&&h===0)return Math.max(s[0],X(e[k],a[0]));var d=y[y.length-1];return k===0&&h>0?Math.max(d,X(e[0],a[h])):Math.max(Math.min(s[h],s[h-1],d),X(e[k],a[h]))},i=[],m=0;m<e.length;m++){for(var g=[],c=0;c<a.length;c++)g.push(o(m,c,i,g));i=g}return i[a.length-1]},bt=function(n,t){t===void 0&&(t={});var e=t.rebalance,a=e===void 0?!0:e,o=t.estimationPoints,i=o===void 0?50:o,m=a?rt(n,{numPoints:i}):n,g=nt(m.map(function(y){return y.x})),c=nt(m.map(function(y){return y.y})),k={x:g,y:c},h=m.map(function(y){return st(y,k)}),s=Math.sqrt(nt(h.map(function(y){var d=y.x,u=y.y;return d*d+u*u})));return h.map(function(y){return{x:y.x/s,y:y.y/s}})},Yt=function(n,t){if(n.length!==t.length)throw new Error("curve and relativeCurve must have the same length");var e=yt(n.map(function(o,i){var m=o.x,g=o.y;return g*t[i].x-m*t[i].y})),a=yt(n.map(function(o,i){var m=o.x,g=o.y;return m*t[i].x+g*t[i].y}));return Math.atan2(e,a)},Mt=function(n,t,e){e===void 0&&(e={});var a=e.estimationPoints,o=a===void 0?50:a,i=e.rotations,m=i===void 0?10:i,g=e.restrictRotationAngle,c=g===void 0?Math.PI:g,k=e.checkRotations,h=k===void 0?!0:k;if(Math.abs(c)>Math.PI)throw new Error("restrictRotationAngle cannot be larger than PI");var s=bt(n,{estimationPoints:o}),y=bt(t,{estimationPoints:o}),d=Math.sqrt(at(s)*at(y)),u=[0];if(h){var _=Yt(s,y);_>Math.PI&&(_=_-2*Math.PI),_!==0&&Math.abs(_)<c&&u.push(_);for(var f=0;f<m;f++){var b=-1*c+2*f*c/(m-1);b!==0&&b!==Math.PI&&u.push(b)}}var L=1/0;return u.forEach(function(I){var T=Vt(s,I),C=ot(T,y);C<L&&(L=C)}),Math.max(1-L/(d/Math.sqrt(2)),0)};function kt(n){let t=0;for(let e=1;e<n.length;e++){const a=n[e-1],o=n[e];t+=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2))}return t}function Ht({cur:n,prev:t,diagonal:e}){const a=Math.max(t.length,n.length),o=rt(n,{numPoints:a}),i=rt(t,{numPoints:a}),m=[...i].reverse(),g={estimationPoints:200,rotations:30},c=Mt(i,o,g),k=Mt(m,o,g),h=kt(o),s=kt(i),y=Math.max(h,s),d=Math.abs(h/s-1),u=ot(i,o),_=ot(m,o),f=u/e,b=_/e,L=u/y,I=_/y;let T=.075;s<100&&(T=.2),s<200&&(T=.15),s<300&&(T=.1);const C=d<T&&c>.9&&(f<.2||L<.2),z=d<T&&k>.9&&(b<.2||I<.2);return{valid:C||z,debug1:{ll_target:T,ll:+d.toFixed(2),sim:+c.toFixed(2),diag:+f.toFixed(2),len:+L.toFixed(2),pass:C},debug2:{ll_target:T,ll:+d.toFixed(2),sim:+k.toFixed(2),diag:+b.toFixed(2),len:+I.toFixed(2),pass:z}}}function wt(n){let t;return{c(){t=V("path"),this.h()},l(e){t=Y(e,"path",{class:!0,d:!0}),q(t).forEach(v),this.h()},h(){r(t,"class","prev svelte-1hvi9n0"),r(t,"d",n[2])},m(e,a){j(e,t,a)},p(e,a){a&4&&r(t,"d",e[2])},d(e){e&&v(t)}}}function Et(n){let t,e="I think you can do better!",a,o;return{c(){t=w("p"),t.textContent=e,this.h()},l(i){t=E(i,"P",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-5wu51j"&&(t.textContent=e),this.h()},h(){r(t,"class","invalid svelte-1hvi9n0")},m(i,m){j(i,t,m),o=!0},i(i){o||(i&&zt(()=>{o&&(a||(a=ht(t,pt,{},!0)),a.run(1))}),o=!0)},o(i){i&&(a||(a=ht(t,pt,{},!1)),a.run(0)),o=!1},d(i){i&&v(t),i&&a&&a.end()}}}function Pt(n){let t,e,a="submit",o,i="reset",m,g,c,k=`target: ll < ~0.1 && sim > 0.9 && (diag < 0.2 || len <
			0.2)`,h,s,y,d=JSON.stringify(n[6])+"",u,_,f,b,L=JSON.stringify(n[7])+"",I,T,C,z,R,P,x,S,N,F,A;return{c(){t=w("div"),e=w("button"),e.textContent=a,o=w("button"),o.textContent=i,m=J(),g=w("div"),c=w("p"),c.textContent=k,h=J(),s=w("p"),y=H("debug1: "),u=H(d),_=J(),f=w("p"),b=H("debug2: "),I=H(L),T=J(),C=w("div"),z=V("svg"),R=V("g"),P=V("path"),x=J(),S=w("p"),N=H(n[4]),this.h()},l(l){t=E(l,"DIV",{class:!0});var M=q(t);e=E(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-13qkurs"&&(e.textContent=a),o=E(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-1lebb1"&&(o.textContent=i),M.forEach(v),m=K(l),g=E(l,"DIV",{class:!0});var D=q(g);c=E(D,"P",{style:!0,"data-svelte-h":!0}),Q(c)!=="svelte-1l1ztp0"&&(c.textContent=k),h=K(D),s=E(D,"P",{style:!0});var $=q(s);y=U($,"debug1: "),u=U($,d),$.forEach(v),_=K(D),f=E(D,"P",{style:!0});var tt=q(f);b=U(tt,"debug2: "),I=U(tt,L),tt.forEach(v),D.forEach(v),T=K(l),C=E(l,"DIV",{class:!0});var G=q(C);z=Y(G,"svg",{class:!0});var it=q(z);R=Y(it,"g",{});var lt=q(R);P=Y(lt,"path",{d:!0,class:!0}),q(P).forEach(v),lt.forEach(v),it.forEach(v),x=K(G),S=E(G,"P",{class:!0});var ct=q(S);N=U(ct,n[4]),ct.forEach(v),G.forEach(v),this.h()},h(){r(e,"class","svelte-1hvi9n0"),r(o,"class","svelte-1hvi9n0"),r(t,"class","c ui svelte-1hvi9n0"),O(c,"text-align","center"),O(c,"font-family","var(--mono)"),O(c,"font-size","12px"),O(s,"text-align","center"),O(s,"font-family","var(--mono)"),O(s,"font-size","12px"),O(f,"text-align","center"),O(f,"font-family","var(--mono)"),O(f,"font-size","12px"),r(g,"class","debug"),r(P,"d",n[3]),r(P,"class","svelte-1hvi9n0"),r(z,"class","shadow svelte-1hvi9n0"),r(S,"class","svelte-1hvi9n0"),r(C,"class","c svelte-1hvi9n0")},m(l,M){j(l,t,M),p(t,e),p(t,o),j(l,m,M),j(l,g,M),p(g,c),p(g,h),p(g,s),p(s,y),p(s,u),p(g,_),p(g,f),p(f,b),p(f,I),j(l,T,M),j(l,C,M),p(C,z),p(z,R),p(R,P),p(C,x),p(C,S),p(S,N),F||(A=[B(e,"click",n[12]),B(o,"click",n[13])],F=!0)},p(l,M){M&64&&d!==(d=JSON.stringify(l[6])+"")&&W(u,d),M&128&&L!==(L=JSON.stringify(l[7])+"")&&W(I,L),M&8&&r(P,"d",l[3]),M&16&&W(N,l[4])},d(l){l&&(v(t),v(m),v(g),v(T),v(C)),F=!1,Ft(A)}}}function Ut(n){let t,e,a,o,i,m,g,c,k,h,s,y,d=n[2]&&wt(n),u=n[5]===!1&&Et(),_=!n[0]&&Pt(n);return{c(){t=w("div"),e=V("svg"),a=V("g"),d&&d.c(),o=V("path"),i=J(),m=w("p"),g=H(n[1]),c=J(),u&&u.c(),k=J(),_&&_.c(),h=Z(),this.h()},l(f){t=E(f,"DIV",{class:!0});var b=q(t);e=Y(b,"svg",{class:!0});var L=q(e);a=Y(L,"g",{});var I=q(a);d&&d.l(I),o=Y(I,"path",{d:!0,class:!0}),q(o).forEach(v),I.forEach(v),L.forEach(v),i=K(b),m=E(b,"P",{class:!0});var T=q(m);g=U(T,n[1]),T.forEach(v),c=K(b),u&&u.l(b),b.forEach(v),k=K(f),_&&_.l(f),h=Z(),this.h()},h(){r(o,"d",n[8]),r(o,"class","svelte-1hvi9n0"),r(e,"class","shadow svelte-1hvi9n0"),r(m,"class","svelte-1hvi9n0"),r(t,"class","c svelte-1hvi9n0"),ft(t,"first",n[1]===0)},m(f,b){j(f,t,b),p(t,e),p(e,a),d&&d.m(a,null),p(a,o),p(t,i),p(t,m),p(m,g),p(t,c),u&&u.m(t,null),j(f,k,b),_&&_.m(f,b),j(f,h,b),s||(y=[B(t,"pointerdown",n[9]),B(t,"pointermove",n[10]),B(t,"pointerup",n[11]),B(t,"pointerleave",n[11])],s=!0)},p(f,[b]){f[2]?d?d.p(f,b):(d=wt(f),d.c(),d.m(a,o)):d&&(d.d(1),d=null),b&256&&r(o,"d",f[8]),b&2&&W(g,f[1]),f[5]===!1?u?b&32&&et(u,1):(u=Et(),u.c(),et(u,1),u.m(t,null)):u&&(jt(),mt(u,1,1,()=>{u=null}),Dt()),b&2&&ft(t,"first",f[1]===0),f[0]?_&&(_.d(1),_=null):_?_.p(f,b):(_=Pt(f),_.c(),_.m(h.parentNode,h))},i(f){et(u)},o(f){mt(u)},d(f){f&&(v(t),v(k),v(h)),d&&d.d(),u&&u.d(),_&&_.d(f),s=!1,Ft(y)}}}const At=300,Bt=12;function Tt(n){const t=+n.offsetX.toFixed(1),e=+n.offsetY.toFixed(1);return[t,e]}function Xt(n,t,e){let a,o,{robot:i}=t,{preset:m}=t;const g=At,c=[[[50,150],[250,150]],[[50,225],[150,75],[250,225],[50,225]],[[50,50],[250,50],[250,250],[50,250],[50,50]]];let k=!1,h=1,s=[],y="",d="",u="",_,f={},b={};function L(P){k=!0;const x=Tt(P);e(15,s[h]=[],s),s[h].push(x)}function I(P){if(!k)return;const x=Tt(P);s[h].push(x),e(15,s=[...s])}function T(){k=!1}function C(P=0){var x;if(e(4,u=P+1),u>h-1&&e(4,u=0),!((x=s[u])!=null&&x.length))setTimeout(C,1e3);else{const S=s[u].map(N=>N.join(" ")).join(" L ");e(3,d=`M ${S}`),setTimeout(()=>{C(u)},1e3/Bt)}}function z(){if(h>0){const P=[...s[h]].map(([F,A])=>({x:F,y:A})),x=[...s[h-1]].map(([F,A])=>({x:F,y:A})),S=Math.sqrt(At**2+g**2),N=Ht({cur:P,prev:x,diagonal:S});e(5,_=N.valid),e(6,f=N.debug1),e(7,b=N.debug2),_?(e(2,y=o),e(1,h+=1)):setTimeout(()=>{e(5,_=void 0)},2e3),e(16,a=[])}}function R(){e(15,s[h]=[],s)}return Nt(()=>{e(15,s=[c[m]||[[0,0]]]),e(2,y=`M ${s[0].map(P=>P.join(" ")).join(" L ")}`),C()}),n.$$set=P=>{"robot"in P&&e(0,i=P.robot),"preset"in P&&e(14,m=P.preset)},n.$$.update=()=>{var P;n.$$.dirty&32770&&e(16,a=(P=s[h])==null?void 0:P.map(x=>x.join(" ")).join(" L ")),n.$$.dirty&65536&&e(8,o=a!=null&&a.length?`M ${a}`:"")},[i,h,y,d,u,_,f,b,o,L,I,T,z,R,m,s,a]}class se extends Lt{constructor(t){super(),It(this,t,Xt,Ut,Ct,{robot:0,preset:14})}}const Gt="Help draw the world’s most collaborative animation!",Wt="Your contribution will just take a few seconds. <br>It’s like the <a target=_blank rel=noreferrer href=https://en.wikipedia.org/wiki/Chinese_whispers>telephone game</a>, but visual.",Qt="<strong>Get in line!</strong> <br>How do you want to be notified?",Zt="You’ll get just three messages",$t=["You’re turn is approaching","It is your turn","The film is complete"],te="Prove it. Draw a circle.",ee="As best you can, please trace the <mark><strong>last person’s drawing</strong></mark> as best you can.",ie={cta:Gt,definition:Wt,prompt:Qt,messageP:Zt,messageLi:$t,robot:te,task:ee};function le(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.13.0"),console.log("build: 2023-10-12-14:10"),console.log("--- --- --- --- --- ---")}export{se as C,oe as M,ie as c,le as v};
